;
; Configuration file that defines the contents of the setup application
; for FreeBASIC
;
; Usage: makescript
;

[PRODUCT_VERSION]
Type=TEXT
Mask="0.20.0b"

[PRODUCT_PUBLISHER]
Type=TEXT
Mask=""

[SETUP_EXE_NAME]
Type=TEXT
Mask="FreeBASIC-vX.XXb-win32.exe"

[ENABLE_SOURCES]
Type=TEXT
Mask=; 

[ENABLE_IMPORT_LIBS]
Type=TEXT
Mask=; 

[__GEN_IMP_LIBS__]
Type=TEXT
Mask=ExecWait '"$INSTDIR\lib\win32\def\genimplibs.exe" -f -a'

[FILES_MAIN]
Type=FILE_LIST
Root=../../..
MaskFolder=SetOutPath "$INSTDIR\\\0"
MaskFile=File "..\\..\\..\\\0"

Select=fbc.exe
Select=changelog.txt
Select=readme.txt
Select=migrating.txt
Select=docs
Select=bin

Select=lib/win32/libfb.a
Select=lib/win32/libfbmt.a
Select=lib/win32/libfbgfx.a
Select=lib/win32/libgcc.a
Select=lib/win32/libmingw32.a
Select=lib/win32/libmingwex.a
Select=lib/win32/libmoldname.a
Select=lib/win32/libcoldname.a
Select=lib/win32/libmsvcrt.dll.a
Select=lib/win32/libkernel32.dll.a
Select=lib/win32/libuser32.dll.a
Select=lib/win32/libgdi32.dll.a
Select=lib/win32/libadvapi32.dll.a
Select=lib/win32/libwinmm.dll.a
Select=lib/win32/libwinspool.dll.a
Select=lib/win32/fbrt0.o
Select=lib/win32/crt2.o
Select=lib/win32/crtbegin.o
Select=lib/win32/crtend.o
Select=lib/win32/dllcrt2.o
Select=lib/win32/gcrt2.o
Select=lib/win32/libgmon.a
Select=lib/win32/libsupc++.a

Select=lib/cygwin/i386pe.x
Select=lib/win32/i386pe.x

Select=inc/datetime.bi
Select=inc/dir.bi
Select=inc/fbgfx.bi
Select=inc/file.bi
Select=inc/openhook.bi
Select=inc/string.bi
Select=inc/utf_conv.bi
Select=inc/vbcompat.bi

Exclude=^bin/dos$
Exclude=^bin/cygwin$
Exclude=^bin/linux$
Exclude=^bin/freebsd$
Exclude=^bin/xbox$

Exclude=^docs/Doxyfile$
Exclude=^docs/html$

Exclude=.+~$
Exclude=\.bak$
Exclude=/CVS$

[FILES_EXAMPLES]
Type=FILE_LIST
Root=../../..
MaskFolder=SetOutPath "$INSTDIR\\\0"
MaskFile=File "..\\..\\..\\\0"

Select=examples

Exclude=^examples/dos$

Exclude=.+~$
Exclude=\.bak$
Exclude=/CVS$
Exclude=\.exe$
Exclude=\.o$
Exclude=\.a$
Exclude=\.lib$

[FILES_LIBS]
Type=GROUP_LIST
Root=../../..
MaskFolder=SetOutPath "$INSTDIR\\\0"
MaskFile=File "..\\..\\..\\\0"
Select=libs_list.conf

[DELETE_MAIN]
Type=FILE_LIST
ListFrom=FILES_MAIN
MaskFile=Delete "$INSTDIR\\\0"

[DELETE_EXAMPLES]
Type=FILE_LIST
ListFrom=FILES_EXAMPLES
MaskFile=Delete "$INSTDIR\\\0"

[DELETE_LIBS]
Type=FILE_LIST
ListFrom=FILES_LIBS
MaskFile=Delete "$INSTDIR\\\0"

[DELETE_FOLDERS]
Type=FILE_LIST
ListFrom=FILES_MAIN
ListFrom=FILES_LIBS
ListFrom=FILES_EXAMPLES
Sort=Descending
MaskFolder=RMDir "$INSTDIR\\\0"

[DELETE_IMPORT_LIBS]
Type=FILE_LIST
ListFrom=FILES_MAIN
Filter=^lib/win32/def/(.*/)*([^/]+)\.def$
ReplaceBy=lib/win32/lib\2.a
MaskFile=Delete "$INSTDIR\\\0"

