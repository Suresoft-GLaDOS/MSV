#define __COMPILE_0
#define __COMPILE_1
#define __COMPILE_2
#define __COMPILE_3
#define __COMPILE_4
#define __COMPILE_5
#define __COMPILE_6
#define __COMPILE_7
#define __COMPILE_8
#define __COMPILE_9
#define __COMPILE_10
#define __COMPILE_11
#define __COMPILE_12
#define __COMPILE_13
#define __COMPILE_14
#define __COMPILE_15
#define __COMPILE_16
#define __COMPILE_17
#define __COMPILE_18
#define __COMPILE_19
#define __COMPILE_20
#define __COMPILE_21
#define __COMPILE_22
#define __COMPILE_23
#define __COMPILE_24
#define __COMPILE_25
#define __COMPILE_26
#define __COMPILE_27
#define __COMPILE_28
#define __COMPILE_29
#define __COMPILE_30
#define __COMPILE_31
#define __COMPILE_32
#define __COMPILE_33
#define __COMPILE_34
#define __COMPILE_35
#define __COMPILE_36
#define __COMPILE_37
#define __COMPILE_38
#define __COMPILE_39
#define __COMPILE_40
#define __COMPILE_41
#define __COMPILE_42
#define __COMPILE_43
#define __COMPILE_44
#define __COMPILE_45
#define __COMPILE_46
#define __COMPILE_50
#define __COMPILE_51
#define __COMPILE_52
#define __COMPILE_53
#define __COMPILE_54
#define __COMPILE_55
#define __COMPILE_56
#define __COMPILE_57
#define __COMPILE_58
#define __COMPILE_59
#define __COMPILE_60
#define __COMPILE_61
#define __COMPILE_62
#define __COMPILE_63
#define __COMPILE_64
#define __COMPILE_65
#define __COMPILE_66
#define __COMPILE_67
#define __COMPILE_68
#define __COMPILE_69
#define __COMPILE_70
#define __COMPILE_71
#define __COMPILE_72
#define __COMPILE_73
#define __COMPILE_74
#define __COMPILE_75
#define __COMPILE_76
#define __COMPILE_77
#define __COMPILE_78
#define __COMPILE_79
#define __COMPILE_81
#define __COMPILE_82
#define __COMPILE_83
#define __COMPILE_84
#define __COMPILE_85
#define __COMPILE_86
#define __COMPILE_87
#define __COMPILE_89
#define __COMPILE_90
#define __COMPILE_91
#define __COMPILE_92
#define __COMPILE_93
#define __COMPILE_94
#define __COMPILE_95
#define __COMPILE_98
#define __COMPILE_99
#define __COMPILE_100
#define __COMPILE_101
#define __COMPILE_102
#define __COMPILE_103
#define __COMPILE_104
#define __COMPILE_105
#define __COMPILE_106
#define __COMPILE_107
#define __COMPILE_108
#define __COMPILE_109
#define __COMPILE_110
#define __COMPILE_111
#define __COMPILE_112
#define __COMPILE_113
#define __COMPILE_114
#define __COMPILE_115
#define __COMPILE_116
#define __COMPILE_117
#define __COMPILE_118
#define __COMPILE_119
#define __COMPILE_120
#define __COMPILE_121
#define __COMPILE_122
#define __COMPILE_123
#define __COMPILE_124
#define __COMPILE_135
#define __COMPILE_136
#define __COMPILE_137
#define __COMPILE_138
#define __COMPILE_139
#define __COMPILE_140
#define __COMPILE_142
#define __COMPILE_143
#define __COMPILE_144
#define __COMPILE_145
#define __COMPILE_146
#define __COMPILE_147
#define __COMPILE_148
#define __COMPILE_149
#define __COMPILE_150
#define __COMPILE_151
#define __COMPILE_152
#define __COMPILE_153
#define __COMPILE_154
#define __COMPILE_156
#define __COMPILE_157
#define __COMPILE_158
#define __COMPILE_159
#define __COMPILE_160
#define __COMPILE_161
#define __COMPILE_162
#define __COMPILE_163
#define __COMPILE_164
#define __COMPILE_165
#define __COMPILE_166
#define __COMPILE_167
#define __COMPILE_168
#define __COMPILE_170
#define __COMPILE_171
#define __COMPILE_172
#define __COMPILE_173
#define __COMPILE_174
#define __COMPILE_175
#define __COMPILE_176
#define __COMPILE_177
#define __COMPILE_178
#define __COMPILE_179
#define __COMPILE_180
#define __COMPILE_181
#define __COMPILE_182
#define __COMPILE_184
#define __COMPILE_185
#define __COMPILE_186
#define __COMPILE_187
#define __COMPILE_188
#define __COMPILE_189
#define __COMPILE_190
#define __COMPILE_192
#define __COMPILE_193
#define __COMPILE_194
#define __COMPILE_195
#define __COMPILE_196
#define __COMPILE_197
#define __COMPILE_198
#define __COMPILE_199
#define __COMPILE_200
#define __COMPILE_201
#define __COMPILE_202
#define __COMPILE_203
#define __COMPILE_204
#define __COMPILE_206
#define __COMPILE_207
#define __COMPILE_208
#define __COMPILE_209
#define __COMPILE_210
#define __COMPILE_211
#define __COMPILE_212
#define __COMPILE_214
#define __COMPILE_215
#define __COMPILE_216
#define __COMPILE_217
#define __COMPILE_218
#define __COMPILE_219
#define __COMPILE_220
#define __COMPILE_221
#define __COMPILE_222
#define __COMPILE_223
#define __COMPILE_224
#define __COMPILE_225
#define __COMPILE_226
#define __COMPILE_228
#define __COMPILE_229
#define __COMPILE_230
#define __COMPILE_231
#define __COMPILE_232
#define __COMPILE_233
#define __COMPILE_234
#define __COMPILE_235
#define __COMPILE_236
#define __COMPILE_237
#define __COMPILE_238
#define __COMPILE_239
#define __COMPILE_240
#define __COMPILE_242
#define __COMPILE_243
#define __COMPILE_244
#define __COMPILE_245
#define __COMPILE_246
#define __COMPILE_247
#define __COMPILE_248
#define __COMPILE_250
#define __COMPILE_251
#define __COMPILE_252
#define __COMPILE_253
#define __COMPILE_254
#define __COMPILE_255
#define __COMPILE_256
#define __COMPILE_258
#define __COMPILE_259
#define __COMPILE_260
#define __COMPILE_261
#define __COMPILE_262
#define __COMPILE_263
#define __COMPILE_264
#define __COMPILE_265
#define __COMPILE_266
#define __COMPILE_267
#define __COMPILE_268
#define __COMPILE_269
#define __COMPILE_270
#define __COMPILE_271
#define __COMPILE_272
#define __COMPILE_273
#define __COMPILE_274
#define __COMPILE_275
#define __COMPILE_276
#define __COMPILE_277
#define __COMPILE_278
#define __COMPILE_279
#define __COMPILE_280
#define __COMPILE_281
#define __COMPILE_282
#define __COMPILE_283
#define __COMPILE_284
#define __COMPILE_286
#define __COMPILE_287
#define __COMPILE_288
#define __COMPILE_289
#define __COMPILE_290
#define __COMPILE_291
#define __COMPILE_292
#define __COMPILE_293
#define __COMPILE_294
#define __COMPILE_295
#define __COMPILE_296
#define __COMPILE_297
#define __COMPILE_298
#define __COMPILE_299
#define __COMPILE_300
#define __COMPILE_301
#define __COMPILE_302
#define __COMPILE_303
#define __COMPILE_304
#define __COMPILE_305
#define __COMPILE_307
#define __COMPILE_308
#define __COMPILE_309
#define __COMPILE_310
#define __COMPILE_311
#define __COMPILE_312
#define __COMPILE_313
#define __COMPILE_314
#define __COMPILE_315
#define __COMPILE_316
#define __COMPILE_317
#define __COMPILE_318
#define __COMPILE_319
#define __COMPILE_320
#define __COMPILE_321
#define __COMPILE_322
#define __COMPILE_323
#define __COMPILE_324
#define __COMPILE_325
#define __COMPILE_326
#define __COMPILE_328
#define __COMPILE_329
#define __COMPILE_330
#define __COMPILE_331
#define __COMPILE_332
#define __COMPILE_333
#define __COMPILE_334
#define __COMPILE_335
#define __COMPILE_336
#define __COMPILE_337
#define __COMPILE_338
#define __COMPILE_339
#define __COMPILE_340
#define __COMPILE_341
#define __COMPILE_342
#define __COMPILE_343
#define __COMPILE_344
#define __COMPILE_345
#define __COMPILE_346
#define __COMPILE_347
#define __COMPILE_348
#define __COMPILE_349
#define __COMPILE_350
#define __COMPILE_351
#define __COMPILE_352
#define __COMPILE_353
#define __COMPILE_354
#define __COMPILE_356
#define __COMPILE_357
#define __COMPILE_358
#define __COMPILE_359
#define __COMPILE_360
#define __COMPILE_361
#define __COMPILE_362
#define __COMPILE_364
#define __COMPILE_365
#define __COMPILE_366
#define __COMPILE_367
#define __COMPILE_368
#define __COMPILE_369
#define __COMPILE_370
#define __COMPILE_371
#define __COMPILE_372
#define __COMPILE_373
#define __COMPILE_374
#define __COMPILE_375
#define __COMPILE_376
#define __COMPILE_377
#define __COMPILE_378
#define __COMPILE_379
#define __COMPILE_380
#define __COMPILE_381
#define __COMPILE_382
#define __COMPILE_383
#define __COMPILE_384
#define __COMPILE_385
#define __COMPILE_386
#define __COMPILE_387
#define __COMPILE_388
#define __COMPILE_389
#define __COMPILE_390
#define __COMPILE_391
#define __COMPILE_392
#define __COMPILE_393
#define __COMPILE_394
#define __COMPILE_395
#define __COMPILE_396
#define __COMPILE_397
#define __COMPILE_398
#define __COMPILE_399
#define __COMPILE_400
#define __COMPILE_402
#define __COMPILE_403
#define __COMPILE_404
#define __COMPILE_405
#define __COMPILE_406
#define __COMPILE_407
#define __COMPILE_408
#define __COMPILE_410
#define __COMPILE_411
#define __COMPILE_412
#define __COMPILE_413
#define __COMPILE_414
#define __COMPILE_415
#define __COMPILE_416
#define __COMPILE_417
#define __COMPILE_418
#define __COMPILE_419
#define __COMPILE_420
#define __COMPILE_421
#define __COMPILE_422
#define __COMPILE_423
#define __COMPILE_424
#define __COMPILE_425
#define __COMPILE_426
#define __COMPILE_427
#define __COMPILE_428
#define __COMPILE_429
#define __COMPILE_431
#define __COMPILE_432
#define __COMPILE_433
#define __COMPILE_434
#define __COMPILE_435
#define __COMPILE_436
#define __COMPILE_437
#define __COMPILE_438
#define __COMPILE_439
#define __COMPILE_440
#define __COMPILE_441
#define __COMPILE_442
#define __COMPILE_443
#define __COMPILE_444
#define __COMPILE_445
#define __COMPILE_446
#define __COMPILE_447
#define __COMPILE_448
#define __COMPILE_449
#define __COMPILE_450
#define __COMPILE_451
#define __COMPILE_452
#define __COMPILE_453
#define __COMPILE_454
#define __COMPILE_455
#define __COMPILE_456
#define __COMPILE_457
#define __COMPILE_459
#define __COMPILE_460
#define __COMPILE_461
#define __COMPILE_462
#define __COMPILE_463
#define __COMPILE_464
#define __COMPILE_465
#define __COMPILE_467
#define __COMPILE_468
#define __COMPILE_469
#define __COMPILE_470
#define __COMPILE_471
#define __COMPILE_472
#define __COMPILE_473
#define __COMPILE_474
#define __COMPILE_475
#define __COMPILE_476
#define __COMPILE_477
#define __COMPILE_478
#define __COMPILE_479
#define __COMPILE_480
#define __COMPILE_481
#define __COMPILE_482
#define __COMPILE_483
#define __COMPILE_484
#define __COMPILE_485
#define __COMPILE_486
#define __COMPILE_487
#define __COMPILE_488
#define __COMPILE_489
#define __COMPILE_490
#define __COMPILE_491
#define __COMPILE_492
#define __COMPILE_493
#define __COMPILE_494
#define __COMPILE_495
#define __COMPILE_496
#define __COMPILE_497
#define __COMPILE_498
#define __COMPILE_499
#define __COMPILE_500
#define __COMPILE_501
#define __COMPILE_502
#define __COMPILE_503
#define __COMPILE_504
#define __COMPILE_505
#define __COMPILE_506
#define __COMPILE_507
#define __COMPILE_508
#define __COMPILE_509
#define __COMPILE_510
#define __COMPILE_511
#define __COMPILE_512
#define __COMPILE_513
#define __COMPILE_514
#define __COMPILE_515
#define __COMPILE_516
#define __COMPILE_517
#define __COMPILE_518
#define __COMPILE_519
#define __COMPILE_520
#define __COMPILE_521
#define __COMPILE_522
#define __COMPILE_523
#define __COMPILE_524
#define __COMPILE_525
#define __COMPILE_526
#define __COMPILE_527
#define __COMPILE_528
#define __COMPILE_529
#define __COMPILE_530
#define __COMPILE_531
#define __COMPILE_532
#define __COMPILE_533
#define __COMPILE_534
#define __COMPILE_535
#define __COMPILE_536
#define __COMPILE_537
#define __COMPILE_538
#define __COMPILE_539
#define __COMPILE_540
#define __COMPILE_541
#define __COMPILE_542
#define __COMPILE_543
#define __COMPILE_544
#define __COMPILE_545
#define __COMPILE_546
#define __COMPILE_547
#define __COMPILE_548
#define __COMPILE_549
#define __COMPILE_550
#define __COMPILE_551
#define __COMPILE_552
#define __COMPILE_553
#define __COMPILE_554
#define __COMPILE_555
#define __COMPILE_556
#define __COMPILE_557
#define __COMPILE_558
#define __COMPILE_559
#define __COMPILE_560
#define __COMPILE_561
#define __COMPILE_562
#define __COMPILE_563
#define __COMPILE_564
#define __COMPILE_565
#define __COMPILE_566
#define __COMPILE_567
#define __COMPILE_568
#define __COMPILE_569
#define __COMPILE_570
#define __COMPILE_571
#define __COMPILE_572
#define __COMPILE_573
#define __COMPILE_574
#define __COMPILE_575
// compile_fin
int __get_mutant(); int __is_neg(const char *location,char *lid,int count, ...); int __abst_hole(); char *__stat_write_init(const char *func_name);void __write_stat(char *str,const char *var_name,void *var_addr,int size); void __stat_file_close(const char *func_name,char *str);long long __mutate(const long long,const char *,const char *); int __trident_choice(char* lid, char* typestr,int* rvals, char** rvals_ids, int rvals_size,int** lvals, char** lvals_ids, int lvals_size);int __trident_output(char* id, char* typestr, int value);float fabs_trident(float a);int __choose(const char *);void *__var_select(unsigned int var_count,void *vars[]);void *__var_select_2(unsigned int var_count,void *vars[]);long long __const_select(unsigned int const_count, ...);void* memset(void*, int, unsigned long); 
/*
   +----------------------------------------------------------------------+
   | PHP Version 5                                                        |
   +----------------------------------------------------------------------+
   | Copyright (c) 1997-2011 The PHP Group                                |
   +----------------------------------------------------------------------+
   | This source file is subject to version 3.01 of the PHP license,      |
   | that is bundled with this package in the file LICENSE, and is        |
   | available through the world-wide-web at the following url:           |
   | http://www.php.net/license/3_01.txt                                  |
   | If you did not receive a copy of the PHP license and are unable to   |
   | obtain it through the world-wide-web, please send a note to          |
   | license@php.net so we can mail you a copy immediately.               |
   +----------------------------------------------------------------------+
   | Author: Jim Winstead <jimw@php.net>                                  |
   +----------------------------------------------------------------------+
 */
/* $Id$ */

#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <sys/types.h>

#include "php.h"

#include "url.h"
#include "file.h"
#ifdef _OSD_POSIX
#ifndef APACHE
#error On this EBCDIC platform, PHP is only supported as an Apache module.
#else /*APACHE*/
#ifndef CHARSET_EBCDIC
#define CHARSET_EBCDIC /* this machine uses EBCDIC, not ASCII! */
#endif
#include "ebcdic.h"
#endif /*APACHE*/
#endif /*_OSD_POSIX*/

/* {{{ free_url
 */
PHPAPI void php_url_free(php_url *theurl)
{
	if (theurl->scheme)
		efree(theurl->scheme);
	if (theurl->user)
		efree(theurl->user);
	if (theurl->pass)
		efree(theurl->pass);
	if (theurl->host)
		efree(theurl->host);
	if (theurl->path)
		efree(theurl->path);
	if (theurl->query)
		efree(theurl->query);
	if (theurl->fragment)
		efree(theurl->fragment);
	efree(theurl);
}
/* }}} */

/* {{{ php_replace_controlchars
 */
PHPAPI char *php_replace_controlchars_ex(char *str, int len)
{
	unsigned char *s = (unsigned char *)str;
	unsigned char *e = (unsigned char *)str + len;
	
	if (!str) {
		return (NULL);
	}
	
	while (s < e) {
	    
		if (iscntrl(*s)) {
			*s='_';
		}	
		s++;
	}
	
	return (str);
} 
/* }}} */

PHPAPI char *php_replace_controlchars(char *str)
{
	return php_replace_controlchars_ex(str, strlen(str));
} 

PHPAPI php_url *php_url_parse(char const *str)
{
	return php_url_parse_ex(str, strlen(str));
}

/* {{{ php_url_parse
 */
PHPAPI php_url *php_url_parse_ex(char const *str, int length)
{
	char port_buf[6];
	php_url *ret = ecalloc(1, sizeof(php_url));
	char const *s, *e, *p, *pp, *ue;
		
	s = str;
	ue = s + length;

	/* parse scheme */
	if ((e = memchr(s, ':', length)) && (e - s)) {
		/* validate scheme */
		p = s;
		while (p < e) {
			/* scheme = 1*[ lowalpha | digit | "+" | "-" | "." ] */
			if (!isalpha(*p) && !isdigit(*p) && *p != '+' && *p != '.' && *p != '-') {
				if (e + 1 < ue) {
					goto parse_port;
				} else {
					goto just_path;
				}
			}
			p++;
		}
	
		if (*(e + 1) == '\0') { /* only scheme is available */
			ret->scheme = estrndup(s, (e - s));
			php_replace_controlchars_ex(ret->scheme, (e - s));
			goto end;
		}

		/* 
		 * certain schemas like mailto: and zlib: may not have any / after them
		 * this check ensures we support those.
		 */
		if (*(e+1) != '/') {
			/* check if the data we get is a port this allows us to 
			 * correctly parse things like a.com:80
			 */
			p = e + 1;
			while (isdigit(*p)) {
				p++;
			}
			
			if ((*p == '\0' || *p == '/') && (p - e) < 7) {
				goto parse_port;
			}
			
			ret->scheme = estrndup(s, (e-s));
			php_replace_controlchars_ex(ret->scheme, (e - s));
			
			length -= ++e - s;
			s = e;
			goto just_path;
		} else {
			ret->scheme = estrndup(s, (e-s));
			php_replace_controlchars_ex(ret->scheme, (e - s));
		
			if (*(e+2) == '/') {
				s = e + 3;
				if (!strncasecmp("file", ret->scheme, sizeof("file"))) {
					if (*(e + 3) == '/') {
						/* support windows drive letters as in:
						   file:///c:/somedir/file.txt
						*/
						if (*(e + 5) == ':') {
							s = e + 4;
						}
						goto nohost;
					}
				}
			} else {
				if (!strncasecmp("file", ret->scheme, sizeof("file"))) {
					s = e + 1;
					goto nohost;
				} else {
					length -= ++e - s;
					s = e;
					goto just_path;
				}	
			}
		}	
	} else if (e) { /* no scheme; starts with colon: look for port */
		parse_port:
		p = e + 1;
		pp = p;

		while (pp-p < 6 && isdigit(*pp)) {
			pp++;
		}

		if (pp - p > 0 && pp - p < 6 && (*pp == '/' || *pp == '\0')) {
			long port;
			memcpy(port_buf, p, (pp - p));
			port_buf[pp - p] = '\0';
			port = strtol(port_buf, NULL, 10);
			if (port > 0 && port <= 65535) {
				ret->port = (unsigned short) port;
			} else {
				STR_FREE(ret->scheme);
				efree(ret);
				return NULL;
			}
		} else {
			goto just_path;
		}
	} else {
		just_path:
		ue = s + length;
		goto nohost;
	}
	
	e = ue;
	
	if (!(p = memchr(s, '/', (ue - s)))) {
		char *query, *fragment;

		query = memchr(s, '?', (ue - s));
		fragment = memchr(s, '#', (ue - s));

		if (query && fragment) {
			if (query > fragment) {
				p = e = fragment;
			} else {
				p = e = query;
			}
		} else if (query) {
			p = e = query;
		} else if (fragment) {
			p = e = fragment;
		}
	} else {
		e = p;
	}	
		
	/* check for login and password */
	if ((p = zend_memrchr(s, '@', (e-s)))) {
		if ((pp = memchr(s, ':', (p-s)))) {
			if ((pp-s) > 0) {
				ret->user = estrndup(s, (pp-s));
				php_replace_controlchars_ex(ret->user, (pp - s));
			}	
		
			pp++;
			if (p-pp > 0) {
				ret->pass = estrndup(pp, (p-pp));
				php_replace_controlchars_ex(ret->pass, (p-pp));
			}	
		} else {
			ret->user = estrndup(s, (p-s));
			php_replace_controlchars_ex(ret->user, (p-s));
		}
		
		s = p + 1;
	}

	/* check for port */
	if (*s == '[' && *(e-1) == ']') {
		/* Short circuit portscan, 
		   we're dealing with an 
		   IPv6 embedded address */
		p = s;
	} else {
		/* memrchr is a GNU specific extension
		   Emulate for wide compatability */
		for(p = e; *p != ':' && p >= s; p--);
	}

	if (p >= s && *p == ':') {
		if (!ret->port) {
			p++;
			if (e-p > 5) { /* port cannot be longer then 5 characters */
				STR_FREE(ret->scheme);
				STR_FREE(ret->user);
				STR_FREE(ret->pass);
				efree(ret);
				return NULL;
			} else if (e - p > 0) {
				long port;
				memcpy(port_buf, p, (e - p));
				port_buf[e - p] = '\0';
				port = strtol(port_buf, NULL, 10);
				if (port > 0 && port <= 65535) {
					ret->port = (unsigned short)port;
				} else {
					STR_FREE(ret->scheme);
					STR_FREE(ret->user);
					STR_FREE(ret->pass);
					efree(ret);
					return NULL;
				}
			}
			p--;
		}	
	} else {
		p = e;
	}
	
	/* check if we have a valid host, if we don't reject the string as url */
	if ((p-s) < 1) {
		STR_FREE(ret->scheme);
		STR_FREE(ret->user);
		STR_FREE(ret->pass);
		efree(ret);
		return NULL;
	}

	ret->host = estrndup(s, (p-s));
	php_replace_controlchars_ex(ret->host, (p - s));
	
	if (e == ue) {
		return ret;
	}
	
	s = e;
	
	nohost:
	
	if ((p = memchr(s, '?', (ue - s)))) {
		pp = strchr(s, '#');

		if (pp && pp < p) {
			p = pp;
			//prophet generated patch
			{
			int __choose0 = __choose("__SWITCH0");
			if (__choose0 == 0)
			{}
			#ifdef __COMPILE_0
			else if (__choose0 == 1)
			{
			//AddIfStmtKind
			if ((pp - s) > 0) {
			    ret->user = _estrndup((s), ((pp - s)));
			    php_replace_controlchars_ex(ret->user, (pp - s));
			}
			}
			#endif
			#ifdef __COMPILE_1
			else if (__choose0 == 2)
			{
			//AddIfStmtKind
			if (*(e + 5) == ':') {
			    s = e + 4;
			}
			}
			#endif
			#ifdef __COMPILE_2
			else if (__choose0 == 3)
			{
			//AddIfStmtKind
			if (++p - ue) {
			    ret->query = _estrndup((p), ((ue - p)));
			    php_replace_controlchars_ex(ret->query, (ue - p));
			}
			}
			#endif
			#ifdef __COMPILE_3
			else if (__choose0 == 4)
			{
			//AddIfStmtKind
			if (e == ue) {
			    return ret;
			}
			}
			#endif
			#ifdef __COMPILE_4
			else if (__choose0 == 5)
			{
			//AddIfStmtKind
			if (p - pp > 0) {
			    ret->pass = _estrndup((pp), ((p - pp)));
			    php_replace_controlchars_ex(ret->pass, (p - pp));
			}
			}
			#endif
			#ifdef __COMPILE_5
			else if (__choose0 == 6)
			{
			//AddIfStmtKind
			if (p - s) {
			    ret->path = _estrndup((s), ((p - s)));
			    php_replace_controlchars_ex(ret->path, (p - s));
			}
			}
			#endif
			#ifdef __COMPILE_6
			else if (__choose0 == 7)
			{
			//AddIfStmtKind
			if (pp - ++p) {
			    ret->query = _estrndup((p), ((pp - p)));
			    php_replace_controlchars_ex(ret->query, (pp - p));
			}
			}
			#endif
			#ifdef __COMPILE_7
			else if (__choose0 == 8)
			{
			//AddIfStmtKind
			if (ret->pass) {
			    _efree((ret->pass));
			}
			}
			#endif
			#ifdef __COMPILE_8
			else if (__choose0 == 9)
			{
			//AddIfStmtKind
			if (ret->scheme) {
			    _efree((ret->scheme));
			}
			}
			#endif
			#ifdef __COMPILE_9
			else if (__choose0 == 10)
			{
			//AddIfStmtKind
			if (ret->user) {
			    _efree((ret->user));
			}
			}
			#endif
			#ifdef __COMPILE_10
			else if (__choose0 == 11)
			{
			//AddIfStmtKind
			if (ue - p) {
			    ret->fragment = _estrndup((p), ((ue - p)));
			    php_replace_controlchars_ex(ret->fragment, (ue - p));
			}
			}
			#endif
			#ifdef __COMPILE_11
			else if (__choose0 == 12)
			{
			//AddInitKind
			memset(&ret->fragment, 0, sizeof (*(&ret->fragment)));
			}
			#endif
			#ifdef __COMPILE_12
			else if (__choose0 == 13)
			{
			//AddInitKind
			memset(&ret->host, 0, sizeof (*(&ret->host)));
			}
			#endif
			#ifdef __COMPILE_13
			else if (__choose0 == 14)
			{
			//AddInitKind
			memset(&ret->pass, 0, sizeof (*(&ret->pass)));
			}
			#endif
			#ifdef __COMPILE_14
			else if (__choose0 == 15)
			{
			//AddInitKind
			memset(&ret->path, 0, sizeof (*(&ret->path)));
			}
			#endif
			#ifdef __COMPILE_15
			else if (__choose0 == 16)
			{
			//AddInitKind
			memset(&ret->port, 0, sizeof (*(&ret->port)));
			}
			#endif
			#ifdef __COMPILE_16
			else if (__choose0 == 17)
			{
			//AddInitKind
			memset(&ret->query, 0, sizeof (*(&ret->query)));
			}
			#endif
			#ifdef __COMPILE_17
			else if (__choose0 == 18)
			{
			//AddInitKind
			memset(&ret->scheme, 0, sizeof (*(&ret->scheme)));
			}
			#endif
			#ifdef __COMPILE_18
			else if (__choose0 == 19)
			{
			//AddInitKind
			memset(&ret->user, 0, sizeof (*(&ret->user)));
			}
			#endif
			#ifdef __COMPILE_19
			else if (__choose0 == 20)
			{
			//AddInitKind
			memset(ret->fragment, 0, sizeof (*(ret->fragment)));
			}
			#endif
			#ifdef __COMPILE_20
			else if (__choose0 == 21)
			{
			//AddInitKind
			memset(ret->host, 0, sizeof (*(ret->host)));
			}
			#endif
			#ifdef __COMPILE_21
			else if (__choose0 == 22)
			{
			//AddInitKind
			memset(ret->pass, 0, sizeof (*(ret->pass)));
			}
			#endif
			#ifdef __COMPILE_22
			else if (__choose0 == 23)
			{
			//AddInitKind
			memset(ret->path, 0, sizeof (*(ret->path)));
			}
			#endif
			#ifdef __COMPILE_23
			else if (__choose0 == 24)
			{
			//AddInitKind
			memset(ret->query, 0, sizeof (*(ret->query)));
			}
			#endif
			#ifdef __COMPILE_24
			else if (__choose0 == 25)
			{
			//AddInitKind
			memset(ret->scheme, 0, sizeof (*(ret->scheme)));
			}
			#endif
			#ifdef __COMPILE_25
			else if (__choose0 == 26)
			{
			//AddInitKind
			memset(ret->user, 0, sizeof (*(ret->user)));
			}
			#endif
			#ifdef __COMPILE_26
			else if (__choose0 == 27)
			{
			//AddStmtAndReplaceAtomKind
			(e)++;
			}
			#endif
			#ifdef __COMPILE_27
			else if (__choose0 == 28)
			{
			//AddStmtAndReplaceAtomKind
			(e)--;
			}
			#endif
			#ifdef __COMPILE_28
			else if (__choose0 == 29)
			{
			//AddStmtAndReplaceAtomKind
			(p)++;
			}
			#endif
			#ifdef __COMPILE_29
			else if (__choose0 == 30)
			{
			//AddStmtAndReplaceAtomKind
			(p)--;
			}
			#endif
			#ifdef __COMPILE_30
			else if (__choose0 == 31)
			{
			//AddStmtAndReplaceAtomKind
			(pp)++;
			}
			#endif
			#ifdef __COMPILE_31
			else if (__choose0 == 32)
			{
			//AddStmtAndReplaceAtomKind
			(pp)--;
			}
			#endif
			#ifdef __COMPILE_32
			else if (__choose0 == 33)
			{
			//AddStmtAndReplaceAtomKind
			(s)++;
			}
			#endif
			#ifdef __COMPILE_33
			else if (__choose0 == 34)
			{
			//AddStmtAndReplaceAtomKind
			(s)--;
			}
			#endif
			#ifdef __COMPILE_34
			else if (__choose0 == 35)
			{
			//AddStmtAndReplaceAtomKind
			(str)++;
			}
			#endif
			#ifdef __COMPILE_35
			else if (__choose0 == 36)
			{
			//AddStmtAndReplaceAtomKind
			(str)--;
			}
			#endif
			#ifdef __COMPILE_36
			else if (__choose0 == 37)
			{
			//AddStmtAndReplaceAtomKind
			(ue)++;
			}
			#endif
			#ifdef __COMPILE_37
			else if (__choose0 == 38)
			{
			//AddStmtAndReplaceAtomKind
			(ue)--;
			}
			#endif
			#ifdef __COMPILE_38
			else if (__choose0 == 39)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)));
			}
			#endif
			#ifdef __COMPILE_39
			else if (__choose0 == 40)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->fragment));
			}
			#endif
			#ifdef __COMPILE_40
			else if (__choose0 == 41)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->host));
			}
			#endif
			#ifdef __COMPILE_41
			else if (__choose0 == 42)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->pass));
			}
			#endif
			#ifdef __COMPILE_42
			else if (__choose0 == 43)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->path));
			}
			#endif
			#ifdef __COMPILE_43
			else if (__choose0 == 44)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->query));
			}
			#endif
			#ifdef __COMPILE_44
			else if (__choose0 == 45)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->scheme));
			}
			#endif
			#ifdef __COMPILE_45
			else if (__choose0 == 46)
			{
			//AddStmtAndReplaceAtomKind
			_efree(((ret)->user));
			}
			#endif
			#ifdef __COMPILE_46
			else if (__choose0 == 47)
			{
			//AddStmtAndReplaceAtomKind
			_efree((ret && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_47
			else if (__choose0 == 48)
			{
			//AddStmtAndReplaceAtomKind
			_efree((ret && !(1 << 5)->pass));
			}
			#endif
			#ifdef __COMPILE_48
			else if (__choose0 == 49)
			{
			//AddStmtAndReplaceAtomKind
			_efree((ret && !(1 << 5)->scheme));
			}
			#endif
			#ifdef __COMPILE_49
			else if (__choose0 == 50)
			{
			//AddStmtAndReplaceAtomKind
			_efree((ret && !(1 << 5)->user));
			}
			#endif
			#ifdef __COMPILE_50
			else if (__choose0 == 51)
			{
			//AddStmtAndReplaceAtomKind
			e = (e);
			}
			#endif
			#ifdef __COMPILE_51
			else if (__choose0 == 52)
			{
			//AddStmtAndReplaceAtomKind
			e = (p);
			}
			#endif
			#ifdef __COMPILE_52
			else if (__choose0 == 53)
			{
			//AddStmtAndReplaceAtomKind
			e = (pp);
			}
			#endif
			#ifdef __COMPILE_53
			else if (__choose0 == 54)
			{
			//AddStmtAndReplaceAtomKind
			e = (s);
			}
			#endif
			#ifdef __COMPILE_54
			else if (__choose0 == 55)
			{
			//AddStmtAndReplaceAtomKind
			e = (str);
			}
			#endif
			#ifdef __COMPILE_55
			else if (__choose0 == 56)
			{
			//AddStmtAndReplaceAtomKind
			e = (ue);
			}
			#endif
			#ifdef __COMPILE_56
			else if (__choose0 == 57)
			{
			//AddStmtAndReplaceAtomKind
			e = p && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_57
			else if (__choose0 == 58)
			{
			//AddStmtAndReplaceAtomKind
			e = ue && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_58
			else if (__choose0 == 59)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf && !(1 << 5), p, (e - p));
			}
			#endif
			#ifdef __COMPILE_59
			else if (__choose0 == 60)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf && !(1 << 5), p, (pp - p));
			}
			#endif
			#ifdef __COMPILE_60
			else if (__choose0 == 61)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (e), (e - p));
			}
			#endif
			#ifdef __COMPILE_61
			else if (__choose0 == 62)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (e), (pp - p));
			}
			#endif
			#ifdef __COMPILE_62
			else if (__choose0 == 63)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (p), (e - p));
			}
			#endif
			#ifdef __COMPILE_63
			else if (__choose0 == 64)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (p), (pp - p));
			}
			#endif
			#ifdef __COMPILE_64
			else if (__choose0 == 65)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (pp), (e - p));
			}
			#endif
			#ifdef __COMPILE_65
			else if (__choose0 == 66)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (pp), (pp - p));
			}
			#endif
			#ifdef __COMPILE_66
			else if (__choose0 == 67)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (s), (e - p));
			}
			#endif
			#ifdef __COMPILE_67
			else if (__choose0 == 68)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (s), (pp - p));
			}
			#endif
			#ifdef __COMPILE_68
			else if (__choose0 == 69)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (str), (e - p));
			}
			#endif
			#ifdef __COMPILE_69
			else if (__choose0 == 70)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (str), (pp - p));
			}
			#endif
			#ifdef __COMPILE_70
			else if (__choose0 == 71)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (ue), (e - p));
			}
			#endif
			#ifdef __COMPILE_71
			else if (__choose0 == 72)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, (ue), (pp - p));
			}
			#endif
			#ifdef __COMPILE_72
			else if (__choose0 == 73)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p && !(1 << 5), (e - p));
			}
			#endif
			#ifdef __COMPILE_73
			else if (__choose0 == 74)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p && !(1 << 5), (pp - p));
			}
			#endif
			#ifdef __COMPILE_74
			else if (__choose0 == 75)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, ((e) - p));
			}
			#endif
			#ifdef __COMPILE_75
			else if (__choose0 == 76)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, ((p) - p));
			}
			#endif
			#ifdef __COMPILE_76
			else if (__choose0 == 77)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, ((pp) - p));
			}
			#endif
			#ifdef __COMPILE_77
			else if (__choose0 == 78)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, ((s) - p));
			}
			#endif
			#ifdef __COMPILE_78
			else if (__choose0 == 79)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, ((str) - p));
			}
			#endif
			#ifdef __COMPILE_79
			else if (__choose0 == 80)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, ((ue) - p));
			}
			#endif
			#ifdef __COMPILE_80
			else if (__choose0 == 81)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e && !(1 << 5) - p));
			}
			#endif
			#ifdef __COMPILE_81
			else if (__choose0 == 82)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - (e)));
			}
			#endif
			#ifdef __COMPILE_82
			else if (__choose0 == 83)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - (p)));
			}
			#endif
			#ifdef __COMPILE_83
			else if (__choose0 == 84)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - (pp)));
			}
			#endif
			#ifdef __COMPILE_84
			else if (__choose0 == 85)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - (s)));
			}
			#endif
			#ifdef __COMPILE_85
			else if (__choose0 == 86)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - (str)));
			}
			#endif
			#ifdef __COMPILE_86
			else if (__choose0 == 87)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - (ue)));
			}
			#endif
			#ifdef __COMPILE_87
			else if (__choose0 == 88)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (e - p && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_88
			else if (__choose0 == 89)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp && !(1 << 5) - p));
			}
			#endif
			#ifdef __COMPILE_89
			else if (__choose0 == 90)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - (e)));
			}
			#endif
			#ifdef __COMPILE_90
			else if (__choose0 == 91)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - (p)));
			}
			#endif
			#ifdef __COMPILE_91
			else if (__choose0 == 92)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - (pp)));
			}
			#endif
			#ifdef __COMPILE_92
			else if (__choose0 == 93)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - (s)));
			}
			#endif
			#ifdef __COMPILE_93
			else if (__choose0 == 94)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - (str)));
			}
			#endif
			#ifdef __COMPILE_94
			else if (__choose0 == 95)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - (ue)));
			}
			#endif
			#ifdef __COMPILE_95
			else if (__choose0 == 96)
			{
			//AddStmtAndReplaceAtomKind
			memcpy(port_buf, p, (pp - p && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_96
			else if (__choose0 == 97)
			{
			//AddStmtAndReplaceAtomKind
			p && !(1 << 5)++;
			}
			#endif
			#ifdef __COMPILE_97
			else if (__choose0 == 98)
			{
			//AddStmtAndReplaceAtomKind
			p && !(1 << 5)--;
			}
			#endif
			#ifdef __COMPILE_98
			else if (__choose0 == 99)
			{
			//AddStmtAndReplaceAtomKind
			p = (1);
			}
			#endif
			#ifdef __COMPILE_99
			else if (__choose0 == 100)
			{
			//AddStmtAndReplaceAtomKind
			p = (e) + 1;
			}
			#endif
			#ifdef __COMPILE_100
			else if (__choose0 == 101)
			{
			//AddStmtAndReplaceAtomKind
			p = (e);
			}
			#endif
			#ifdef __COMPILE_101
			else if (__choose0 == 102)
			{
			//AddStmtAndReplaceAtomKind
			p = (p) + 1;
			}
			#endif
			#ifdef __COMPILE_102
			else if (__choose0 == 103)
			{
			//AddStmtAndReplaceAtomKind
			p = (p);
			}
			#endif
			#ifdef __COMPILE_103
			else if (__choose0 == 104)
			{
			//AddStmtAndReplaceAtomKind
			p = (pp) + 1;
			}
			#endif
			#ifdef __COMPILE_104
			else if (__choose0 == 105)
			{
			//AddStmtAndReplaceAtomKind
			p = (pp);
			}
			#endif
			#ifdef __COMPILE_105
			else if (__choose0 == 106)
			{
			//AddStmtAndReplaceAtomKind
			p = (s) + 1;
			}
			#endif
			#ifdef __COMPILE_106
			else if (__choose0 == 107)
			{
			//AddStmtAndReplaceAtomKind
			p = (s);
			}
			#endif
			#ifdef __COMPILE_107
			else if (__choose0 == 108)
			{
			//AddStmtAndReplaceAtomKind
			p = (str) + 1;
			}
			#endif
			#ifdef __COMPILE_108
			else if (__choose0 == 109)
			{
			//AddStmtAndReplaceAtomKind
			p = (str);
			}
			#endif
			#ifdef __COMPILE_109
			else if (__choose0 == 110)
			{
			//AddStmtAndReplaceAtomKind
			p = (ue) + 1;
			}
			#endif
			#ifdef __COMPILE_110
			else if (__choose0 == 111)
			{
			//AddStmtAndReplaceAtomKind
			p = (ue);
			}
			#endif
			#ifdef __COMPILE_111
			else if (__choose0 == 112)
			{
			//AddStmtAndReplaceAtomKind
			p = e && !(1 << 5) + 1;
			}
			#endif
			#ifdef __COMPILE_112
			else if (__choose0 == 113)
			{
			//AddStmtAndReplaceAtomKind
			p = e && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_113
			else if (__choose0 == 114)
			{
			//AddStmtAndReplaceAtomKind
			p = pp && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_114
			else if (__choose0 == 115)
			{
			//AddStmtAndReplaceAtomKind
			p = s && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_115
			else if (__choose0 == 116)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->fragment, (ue - p));
			}
			#endif
			#ifdef __COMPILE_116
			else if (__choose0 == 117)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->host, (p - s));
			}
			#endif
			#ifdef __COMPILE_117
			else if (__choose0 == 118)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->pass, (p - pp));
			}
			#endif
			#ifdef __COMPILE_118
			else if (__choose0 == 119)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->path, (p - s));
			}
			#endif
			#ifdef __COMPILE_119
			else if (__choose0 == 120)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->path, (ue - s));
			}
			#endif
			#ifdef __COMPILE_120
			else if (__choose0 == 121)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->query, (pp - p));
			}
			#endif
			#ifdef __COMPILE_121
			else if (__choose0 == 122)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->query, (ue - p));
			}
			#endif
			#ifdef __COMPILE_122
			else if (__choose0 == 123)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->scheme, (e - s));
			}
			#endif
			#ifdef __COMPILE_123
			else if (__choose0 == 124)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->user, (p - s));
			}
			#endif
			#ifdef __COMPILE_124
			else if (__choose0 == 125)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex((ret)->user, (pp - s));
			}
			#endif
			#ifdef __COMPILE_125
			else if (__choose0 == 126)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->fragment, (ue - p));
			}
			#endif
			#ifdef __COMPILE_126
			else if (__choose0 == 127)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->host, (p - s));
			}
			#endif
			#ifdef __COMPILE_127
			else if (__choose0 == 128)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->pass, (p - pp));
			}
			#endif
			#ifdef __COMPILE_128
			else if (__choose0 == 129)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->path, (p - s));
			}
			#endif
			#ifdef __COMPILE_129
			else if (__choose0 == 130)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->path, (ue - s));
			}
			#endif
			#ifdef __COMPILE_130
			else if (__choose0 == 131)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->query, (pp - p));
			}
			#endif
			#ifdef __COMPILE_131
			else if (__choose0 == 132)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->query, (ue - p));
			}
			#endif
			#ifdef __COMPILE_132
			else if (__choose0 == 133)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->scheme, (e - s));
			}
			#endif
			#ifdef __COMPILE_133
			else if (__choose0 == 134)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->user, (p - s));
			}
			#endif
			#ifdef __COMPILE_134
			else if (__choose0 == 135)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret && !(1 << 5)->user, (pp - s));
			}
			#endif
			#ifdef __COMPILE_135
			else if (__choose0 == 136)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, ((e) - p));
			}
			#endif
			#ifdef __COMPILE_136
			else if (__choose0 == 137)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, ((p) - p));
			}
			#endif
			#ifdef __COMPILE_137
			else if (__choose0 == 138)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, ((pp) - p));
			}
			#endif
			#ifdef __COMPILE_138
			else if (__choose0 == 139)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, ((s) - p));
			}
			#endif
			#ifdef __COMPILE_139
			else if (__choose0 == 140)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, ((str) - p));
			}
			#endif
			#ifdef __COMPILE_140
			else if (__choose0 == 141)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, ((ue) - p));
			}
			#endif
			#ifdef __COMPILE_141
			else if (__choose0 == 142)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue && !(1 << 5) - p));
			}
			#endif
			#ifdef __COMPILE_142
			else if (__choose0 == 143)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - (e)));
			}
			#endif
			#ifdef __COMPILE_143
			else if (__choose0 == 144)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - (p)));
			}
			#endif
			#ifdef __COMPILE_144
			else if (__choose0 == 145)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - (pp)));
			}
			#endif
			#ifdef __COMPILE_145
			else if (__choose0 == 146)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - (s)));
			}
			#endif
			#ifdef __COMPILE_146
			else if (__choose0 == 147)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - (str)));
			}
			#endif
			#ifdef __COMPILE_147
			else if (__choose0 == 148)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - (ue)));
			}
			#endif
			#ifdef __COMPILE_148
			else if (__choose0 == 149)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->fragment, (ue - p && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_149
			else if (__choose0 == 150)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, ((e) - s));
			}
			#endif
			#ifdef __COMPILE_150
			else if (__choose0 == 151)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, ((p) - s));
			}
			#endif
			#ifdef __COMPILE_151
			else if (__choose0 == 152)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, ((pp) - s));
			}
			#endif
			#ifdef __COMPILE_152
			else if (__choose0 == 153)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, ((s) - s));
			}
			#endif
			#ifdef __COMPILE_153
			else if (__choose0 == 154)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, ((str) - s));
			}
			#endif
			#ifdef __COMPILE_154
			else if (__choose0 == 155)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, ((ue) - s));
			}
			#endif
			#ifdef __COMPILE_155
			else if (__choose0 == 156)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p && !(1 << 5) - s));
			}
			#endif
			#ifdef __COMPILE_156
			else if (__choose0 == 157)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - (e)));
			}
			#endif
			#ifdef __COMPILE_157
			else if (__choose0 == 158)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - (p)));
			}
			#endif
			#ifdef __COMPILE_158
			else if (__choose0 == 159)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - (pp)));
			}
			#endif
			#ifdef __COMPILE_159
			else if (__choose0 == 160)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - (s)));
			}
			#endif
			#ifdef __COMPILE_160
			else if (__choose0 == 161)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - (str)));
			}
			#endif
			#ifdef __COMPILE_161
			else if (__choose0 == 162)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - (ue)));
			}
			#endif
			#ifdef __COMPILE_162
			else if (__choose0 == 163)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->host, (p - s && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_163
			else if (__choose0 == 164)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, ((e) - pp));
			}
			#endif
			#ifdef __COMPILE_164
			else if (__choose0 == 165)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, ((p) - pp));
			}
			#endif
			#ifdef __COMPILE_165
			else if (__choose0 == 166)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, ((pp) - pp));
			}
			#endif
			#ifdef __COMPILE_166
			else if (__choose0 == 167)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, ((s) - pp));
			}
			#endif
			#ifdef __COMPILE_167
			else if (__choose0 == 168)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, ((str) - pp));
			}
			#endif
			#ifdef __COMPILE_168
			else if (__choose0 == 169)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, ((ue) - pp));
			}
			#endif
			#ifdef __COMPILE_169
			else if (__choose0 == 170)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p && !(1 << 5) - pp));
			}
			#endif
			#ifdef __COMPILE_170
			else if (__choose0 == 171)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - (e)));
			}
			#endif
			#ifdef __COMPILE_171
			else if (__choose0 == 172)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - (p)));
			}
			#endif
			#ifdef __COMPILE_172
			else if (__choose0 == 173)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - (pp)));
			}
			#endif
			#ifdef __COMPILE_173
			else if (__choose0 == 174)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - (s)));
			}
			#endif
			#ifdef __COMPILE_174
			else if (__choose0 == 175)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - (str)));
			}
			#endif
			#ifdef __COMPILE_175
			else if (__choose0 == 176)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - (ue)));
			}
			#endif
			#ifdef __COMPILE_176
			else if (__choose0 == 177)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->pass, (p - pp && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_177
			else if (__choose0 == 178)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, ((e) - s));
			}
			#endif
			#ifdef __COMPILE_178
			else if (__choose0 == 179)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, ((p) - s));
			}
			#endif
			#ifdef __COMPILE_179
			else if (__choose0 == 180)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, ((pp) - s));
			}
			#endif
			#ifdef __COMPILE_180
			else if (__choose0 == 181)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, ((s) - s));
			}
			#endif
			#ifdef __COMPILE_181
			else if (__choose0 == 182)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, ((str) - s));
			}
			#endif
			#ifdef __COMPILE_182
			else if (__choose0 == 183)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, ((ue) - s));
			}
			#endif
			#ifdef __COMPILE_183
			else if (__choose0 == 184)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p && !(1 << 5) - s));
			}
			#endif
			#ifdef __COMPILE_184
			else if (__choose0 == 185)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - (e)));
			}
			#endif
			#ifdef __COMPILE_185
			else if (__choose0 == 186)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - (p)));
			}
			#endif
			#ifdef __COMPILE_186
			else if (__choose0 == 187)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - (pp)));
			}
			#endif
			#ifdef __COMPILE_187
			else if (__choose0 == 188)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - (s)));
			}
			#endif
			#ifdef __COMPILE_188
			else if (__choose0 == 189)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - (str)));
			}
			#endif
			#ifdef __COMPILE_189
			else if (__choose0 == 190)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - (ue)));
			}
			#endif
			#ifdef __COMPILE_190
			else if (__choose0 == 191)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (p - s && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_191
			else if (__choose0 == 192)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue && !(1 << 5) - s));
			}
			#endif
			#ifdef __COMPILE_192
			else if (__choose0 == 193)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - (e)));
			}
			#endif
			#ifdef __COMPILE_193
			else if (__choose0 == 194)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - (p)));
			}
			#endif
			#ifdef __COMPILE_194
			else if (__choose0 == 195)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - (pp)));
			}
			#endif
			#ifdef __COMPILE_195
			else if (__choose0 == 196)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - (s)));
			}
			#endif
			#ifdef __COMPILE_196
			else if (__choose0 == 197)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - (str)));
			}
			#endif
			#ifdef __COMPILE_197
			else if (__choose0 == 198)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - (ue)));
			}
			#endif
			#ifdef __COMPILE_198
			else if (__choose0 == 199)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->path, (ue - s && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_199
			else if (__choose0 == 200)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, ((e) - p));
			}
			#endif
			#ifdef __COMPILE_200
			else if (__choose0 == 201)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, ((p) - p));
			}
			#endif
			#ifdef __COMPILE_201
			else if (__choose0 == 202)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, ((pp) - p));
			}
			#endif
			#ifdef __COMPILE_202
			else if (__choose0 == 203)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, ((s) - p));
			}
			#endif
			#ifdef __COMPILE_203
			else if (__choose0 == 204)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, ((str) - p));
			}
			#endif
			#ifdef __COMPILE_204
			else if (__choose0 == 205)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, ((ue) - p));
			}
			#endif
			#ifdef __COMPILE_205
			else if (__choose0 == 206)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp && !(1 << 5) - p));
			}
			#endif
			#ifdef __COMPILE_206
			else if (__choose0 == 207)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - (e)));
			}
			#endif
			#ifdef __COMPILE_207
			else if (__choose0 == 208)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - (p)));
			}
			#endif
			#ifdef __COMPILE_208
			else if (__choose0 == 209)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - (pp)));
			}
			#endif
			#ifdef __COMPILE_209
			else if (__choose0 == 210)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - (s)));
			}
			#endif
			#ifdef __COMPILE_210
			else if (__choose0 == 211)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - (str)));
			}
			#endif
			#ifdef __COMPILE_211
			else if (__choose0 == 212)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - (ue)));
			}
			#endif
			#ifdef __COMPILE_212
			else if (__choose0 == 213)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (pp - p && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_213
			else if (__choose0 == 214)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue && !(1 << 5) - p));
			}
			#endif
			#ifdef __COMPILE_214
			else if (__choose0 == 215)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - (e)));
			}
			#endif
			#ifdef __COMPILE_215
			else if (__choose0 == 216)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - (p)));
			}
			#endif
			#ifdef __COMPILE_216
			else if (__choose0 == 217)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - (pp)));
			}
			#endif
			#ifdef __COMPILE_217
			else if (__choose0 == 218)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - (s)));
			}
			#endif
			#ifdef __COMPILE_218
			else if (__choose0 == 219)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - (str)));
			}
			#endif
			#ifdef __COMPILE_219
			else if (__choose0 == 220)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - (ue)));
			}
			#endif
			#ifdef __COMPILE_220
			else if (__choose0 == 221)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->query, (ue - p && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_221
			else if (__choose0 == 222)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, ((e) - s));
			}
			#endif
			#ifdef __COMPILE_222
			else if (__choose0 == 223)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, ((p) - s));
			}
			#endif
			#ifdef __COMPILE_223
			else if (__choose0 == 224)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, ((pp) - s));
			}
			#endif
			#ifdef __COMPILE_224
			else if (__choose0 == 225)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, ((s) - s));
			}
			#endif
			#ifdef __COMPILE_225
			else if (__choose0 == 226)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, ((str) - s));
			}
			#endif
			#ifdef __COMPILE_226
			else if (__choose0 == 227)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, ((ue) - s));
			}
			#endif
			#ifdef __COMPILE_227
			else if (__choose0 == 228)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e && !(1 << 5) - s));
			}
			#endif
			#ifdef __COMPILE_228
			else if (__choose0 == 229)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - (e)));
			}
			#endif
			#ifdef __COMPILE_229
			else if (__choose0 == 230)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - (p)));
			}
			#endif
			#ifdef __COMPILE_230
			else if (__choose0 == 231)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - (pp)));
			}
			#endif
			#ifdef __COMPILE_231
			else if (__choose0 == 232)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - (s)));
			}
			#endif
			#ifdef __COMPILE_232
			else if (__choose0 == 233)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - (str)));
			}
			#endif
			#ifdef __COMPILE_233
			else if (__choose0 == 234)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - (ue)));
			}
			#endif
			#ifdef __COMPILE_234
			else if (__choose0 == 235)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->scheme, (e - s && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_235
			else if (__choose0 == 236)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, ((e) - s));
			}
			#endif
			#ifdef __COMPILE_236
			else if (__choose0 == 237)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, ((p) - s));
			}
			#endif
			#ifdef __COMPILE_237
			else if (__choose0 == 238)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, ((pp) - s));
			}
			#endif
			#ifdef __COMPILE_238
			else if (__choose0 == 239)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, ((s) - s));
			}
			#endif
			#ifdef __COMPILE_239
			else if (__choose0 == 240)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, ((str) - s));
			}
			#endif
			#ifdef __COMPILE_240
			else if (__choose0 == 241)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, ((ue) - s));
			}
			#endif
			#ifdef __COMPILE_241
			else if (__choose0 == 242)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p && !(1 << 5) - s));
			}
			#endif
			#ifdef __COMPILE_242
			else if (__choose0 == 243)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - (e)));
			}
			#endif
			#ifdef __COMPILE_243
			else if (__choose0 == 244)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - (p)));
			}
			#endif
			#ifdef __COMPILE_244
			else if (__choose0 == 245)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - (pp)));
			}
			#endif
			#ifdef __COMPILE_245
			else if (__choose0 == 246)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - (s)));
			}
			#endif
			#ifdef __COMPILE_246
			else if (__choose0 == 247)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - (str)));
			}
			#endif
			#ifdef __COMPILE_247
			else if (__choose0 == 248)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - (ue)));
			}
			#endif
			#ifdef __COMPILE_248
			else if (__choose0 == 249)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (p - s && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_249
			else if (__choose0 == 250)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp && !(1 << 5) - s));
			}
			#endif
			#ifdef __COMPILE_250
			else if (__choose0 == 251)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - (e)));
			}
			#endif
			#ifdef __COMPILE_251
			else if (__choose0 == 252)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - (p)));
			}
			#endif
			#ifdef __COMPILE_252
			else if (__choose0 == 253)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - (pp)));
			}
			#endif
			#ifdef __COMPILE_253
			else if (__choose0 == 254)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - (s)));
			}
			#endif
			#ifdef __COMPILE_254
			else if (__choose0 == 255)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - (str)));
			}
			#endif
			#ifdef __COMPILE_255
			else if (__choose0 == 256)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - (ue)));
			}
			#endif
			#ifdef __COMPILE_256
			else if (__choose0 == 257)
			{
			//AddStmtAndReplaceAtomKind
			php_replace_controlchars_ex(ret->user, (pp - s && !(1 << 5)));
			}
			#endif
			#ifdef __COMPILE_257
			else if (__choose0 == 258)
			{
			//AddStmtAndReplaceAtomKind
			pp && !(1 << 5)++;
			}
			#endif
			#ifdef __COMPILE_258
			else if (__choose0 == 259)
			{
			//AddStmtAndReplaceAtomKind
			pp = (e);
			}
			#endif
			#ifdef __COMPILE_259
			else if (__choose0 == 260)
			{
			//AddStmtAndReplaceAtomKind
			pp = (p);
			}
			#endif
			#ifdef __COMPILE_260
			else if (__choose0 == 261)
			{
			//AddStmtAndReplaceAtomKind
			pp = (pp);
			}
			#endif
			#ifdef __COMPILE_261
			else if (__choose0 == 262)
			{
			//AddStmtAndReplaceAtomKind
			pp = (s);
			}
			#endif
			#ifdef __COMPILE_262
			else if (__choose0 == 263)
			{
			//AddStmtAndReplaceAtomKind
			pp = (str);
			}
			#endif
			#ifdef __COMPILE_263
			else if (__choose0 == 264)
			{
			//AddStmtAndReplaceAtomKind
			pp = (ue);
			}
			#endif
			#ifdef __COMPILE_264
			else if (__choose0 == 265)
			{
			//AddStmtAndReplaceAtomKind
			pp = p && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_265
			else if (__choose0 == 266)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr((e), '#');
			}
			#endif
			#ifdef __COMPILE_266
			else if (__choose0 == 267)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr((p), '#');
			}
			#endif
			#ifdef __COMPILE_267
			else if (__choose0 == 268)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr((pp), '#');
			}
			#endif
			#ifdef __COMPILE_268
			else if (__choose0 == 269)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr((s), '#');
			}
			#endif
			#ifdef __COMPILE_269
			else if (__choose0 == 270)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr((str), '#');
			}
			#endif
			#ifdef __COMPILE_270
			else if (__choose0 == 271)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr((ue), '#');
			}
			#endif
			#ifdef __COMPILE_271
			else if (__choose0 == 272)
			{
			//AddStmtAndReplaceAtomKind
			pp = strchr(s && !(1 << 5), '#');
			}
			#endif
			#ifdef __COMPILE_272
			else if (__choose0 == 273)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup(((e)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_273
			else if (__choose0 == 274)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup(((p)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_274
			else if (__choose0 == 275)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup(((pp)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_275
			else if (__choose0 == 276)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup(((s)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_276
			else if (__choose0 == 277)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup(((str)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_277
			else if (__choose0 == 278)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup(((ue)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_278
			else if (__choose0 == 279)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p && !(1 << 5)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_279
			else if (__choose0 == 280)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), (((e) - p)));
			}
			#endif
			#ifdef __COMPILE_280
			else if (__choose0 == 281)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), (((p) - p)));
			}
			#endif
			#ifdef __COMPILE_281
			else if (__choose0 == 282)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), (((pp) - p)));
			}
			#endif
			#ifdef __COMPILE_282
			else if (__choose0 == 283)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), (((s) - p)));
			}
			#endif
			#ifdef __COMPILE_283
			else if (__choose0 == 284)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), (((str) - p)));
			}
			#endif
			#ifdef __COMPILE_284
			else if (__choose0 == 285)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), (((ue) - p)));
			}
			#endif
			#ifdef __COMPILE_285
			else if (__choose0 == 286)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue && !(1 << 5) - p)));
			}
			#endif
			#ifdef __COMPILE_286
			else if (__choose0 == 287)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - (e))));
			}
			#endif
			#ifdef __COMPILE_287
			else if (__choose0 == 288)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - (p))));
			}
			#endif
			#ifdef __COMPILE_288
			else if (__choose0 == 289)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - (pp))));
			}
			#endif
			#ifdef __COMPILE_289
			else if (__choose0 == 290)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - (s))));
			}
			#endif
			#ifdef __COMPILE_290
			else if (__choose0 == 291)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - (str))));
			}
			#endif
			#ifdef __COMPILE_291
			else if (__choose0 == 292)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - (ue))));
			}
			#endif
			#ifdef __COMPILE_292
			else if (__choose0 == 293)
			{
			//AddStmtAndReplaceAtomKind
			ret->fragment = _estrndup((p), ((ue - p && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_293
			else if (__choose0 == 294)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup(((e)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_294
			else if (__choose0 == 295)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup(((p)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_295
			else if (__choose0 == 296)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup(((pp)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_296
			else if (__choose0 == 297)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup(((s)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_297
			else if (__choose0 == 298)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup(((str)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_298
			else if (__choose0 == 299)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup(((ue)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_299
			else if (__choose0 == 300)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s && !(1 << 5)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_300
			else if (__choose0 == 301)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), (((e) - s)));
			}
			#endif
			#ifdef __COMPILE_301
			else if (__choose0 == 302)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), (((p) - s)));
			}
			#endif
			#ifdef __COMPILE_302
			else if (__choose0 == 303)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), (((pp) - s)));
			}
			#endif
			#ifdef __COMPILE_303
			else if (__choose0 == 304)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), (((s) - s)));
			}
			#endif
			#ifdef __COMPILE_304
			else if (__choose0 == 305)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), (((str) - s)));
			}
			#endif
			#ifdef __COMPILE_305
			else if (__choose0 == 306)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), (((ue) - s)));
			}
			#endif
			#ifdef __COMPILE_306
			else if (__choose0 == 307)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p && !(1 << 5) - s)));
			}
			#endif
			#ifdef __COMPILE_307
			else if (__choose0 == 308)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - (e))));
			}
			#endif
			#ifdef __COMPILE_308
			else if (__choose0 == 309)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - (p))));
			}
			#endif
			#ifdef __COMPILE_309
			else if (__choose0 == 310)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - (pp))));
			}
			#endif
			#ifdef __COMPILE_310
			else if (__choose0 == 311)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - (s))));
			}
			#endif
			#ifdef __COMPILE_311
			else if (__choose0 == 312)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - (str))));
			}
			#endif
			#ifdef __COMPILE_312
			else if (__choose0 == 313)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - (ue))));
			}
			#endif
			#ifdef __COMPILE_313
			else if (__choose0 == 314)
			{
			//AddStmtAndReplaceAtomKind
			ret->host = _estrndup((s), ((p - s && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_314
			else if (__choose0 == 315)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup(((e)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_315
			else if (__choose0 == 316)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup(((p)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_316
			else if (__choose0 == 317)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup(((pp)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_317
			else if (__choose0 == 318)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup(((s)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_318
			else if (__choose0 == 319)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup(((str)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_319
			else if (__choose0 == 320)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup(((ue)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_320
			else if (__choose0 == 321)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp && !(1 << 5)), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_321
			else if (__choose0 == 322)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), (((e) - pp)));
			}
			#endif
			#ifdef __COMPILE_322
			else if (__choose0 == 323)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), (((p) - pp)));
			}
			#endif
			#ifdef __COMPILE_323
			else if (__choose0 == 324)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), (((pp) - pp)));
			}
			#endif
			#ifdef __COMPILE_324
			else if (__choose0 == 325)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), (((s) - pp)));
			}
			#endif
			#ifdef __COMPILE_325
			else if (__choose0 == 326)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), (((str) - pp)));
			}
			#endif
			#ifdef __COMPILE_326
			else if (__choose0 == 327)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), (((ue) - pp)));
			}
			#endif
			#ifdef __COMPILE_327
			else if (__choose0 == 328)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p && !(1 << 5) - pp)));
			}
			#endif
			#ifdef __COMPILE_328
			else if (__choose0 == 329)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - (e))));
			}
			#endif
			#ifdef __COMPILE_329
			else if (__choose0 == 330)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - (p))));
			}
			#endif
			#ifdef __COMPILE_330
			else if (__choose0 == 331)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - (pp))));
			}
			#endif
			#ifdef __COMPILE_331
			else if (__choose0 == 332)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - (s))));
			}
			#endif
			#ifdef __COMPILE_332
			else if (__choose0 == 333)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - (str))));
			}
			#endif
			#ifdef __COMPILE_333
			else if (__choose0 == 334)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - (ue))));
			}
			#endif
			#ifdef __COMPILE_334
			else if (__choose0 == 335)
			{
			//AddStmtAndReplaceAtomKind
			ret->pass = _estrndup((pp), ((p - pp && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_335
			else if (__choose0 == 336)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((e)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_336
			else if (__choose0 == 337)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((e)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_337
			else if (__choose0 == 338)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((p)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_338
			else if (__choose0 == 339)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((p)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_339
			else if (__choose0 == 340)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((pp)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_340
			else if (__choose0 == 341)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((pp)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_341
			else if (__choose0 == 342)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((s)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_342
			else if (__choose0 == 343)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((s)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_343
			else if (__choose0 == 344)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((str)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_344
			else if (__choose0 == 345)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((str)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_345
			else if (__choose0 == 346)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((ue)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_346
			else if (__choose0 == 347)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup(((ue)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_347
			else if (__choose0 == 348)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s && !(1 << 5)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_348
			else if (__choose0 == 349)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s && !(1 << 5)), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_349
			else if (__choose0 == 350)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), (((e) - s)));
			}
			#endif
			#ifdef __COMPILE_350
			else if (__choose0 == 351)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), (((p) - s)));
			}
			#endif
			#ifdef __COMPILE_351
			else if (__choose0 == 352)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), (((pp) - s)));
			}
			#endif
			#ifdef __COMPILE_352
			else if (__choose0 == 353)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), (((s) - s)));
			}
			#endif
			#ifdef __COMPILE_353
			else if (__choose0 == 354)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), (((str) - s)));
			}
			#endif
			#ifdef __COMPILE_354
			else if (__choose0 == 355)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), (((ue) - s)));
			}
			#endif
			#ifdef __COMPILE_355
			else if (__choose0 == 356)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p && !(1 << 5) - s)));
			}
			#endif
			#ifdef __COMPILE_356
			else if (__choose0 == 357)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - (e))));
			}
			#endif
			#ifdef __COMPILE_357
			else if (__choose0 == 358)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - (p))));
			}
			#endif
			#ifdef __COMPILE_358
			else if (__choose0 == 359)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - (pp))));
			}
			#endif
			#ifdef __COMPILE_359
			else if (__choose0 == 360)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - (s))));
			}
			#endif
			#ifdef __COMPILE_360
			else if (__choose0 == 361)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - (str))));
			}
			#endif
			#ifdef __COMPILE_361
			else if (__choose0 == 362)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - (ue))));
			}
			#endif
			#ifdef __COMPILE_362
			else if (__choose0 == 363)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((p - s && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_363
			else if (__choose0 == 364)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue && !(1 << 5) - s)));
			}
			#endif
			#ifdef __COMPILE_364
			else if (__choose0 == 365)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - (e))));
			}
			#endif
			#ifdef __COMPILE_365
			else if (__choose0 == 366)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - (p))));
			}
			#endif
			#ifdef __COMPILE_366
			else if (__choose0 == 367)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - (pp))));
			}
			#endif
			#ifdef __COMPILE_367
			else if (__choose0 == 368)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - (s))));
			}
			#endif
			#ifdef __COMPILE_368
			else if (__choose0 == 369)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - (str))));
			}
			#endif
			#ifdef __COMPILE_369
			else if (__choose0 == 370)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - (ue))));
			}
			#endif
			#ifdef __COMPILE_370
			else if (__choose0 == 371)
			{
			//AddStmtAndReplaceAtomKind
			ret->path = _estrndup((s), ((ue - s && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_371
			else if (__choose0 == 372)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (0);
			}
			#endif
			#ifdef __COMPILE_372
			else if (__choose0 == 373)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (1);
			}
			#endif
			#ifdef __COMPILE_373
			else if (__choose0 == 374)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (10);
			}
			#endif
			#ifdef __COMPILE_374
			else if (__choose0 == 375)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (2);
			}
			#endif
			#ifdef __COMPILE_375
			else if (__choose0 == 376)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (3);
			}
			#endif
			#ifdef __COMPILE_376
			else if (__choose0 == 377)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (4);
			}
			#endif
			#ifdef __COMPILE_377
			else if (__choose0 == 378)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (5);
			}
			#endif
			#ifdef __COMPILE_378
			else if (__choose0 == 379)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (6);
			}
			#endif
			#ifdef __COMPILE_379
			else if (__choose0 == 380)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (65535);
			}
			#endif
			#ifdef __COMPILE_380
			else if (__choose0 == 381)
			{
			//AddStmtAndReplaceAtomKind
			ret->port = (7);
			}
			#endif
			#ifdef __COMPILE_381
			else if (__choose0 == 382)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((e)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_382
			else if (__choose0 == 383)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((e)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_383
			else if (__choose0 == 384)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((p)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_384
			else if (__choose0 == 385)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((p)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_385
			else if (__choose0 == 386)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((pp)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_386
			else if (__choose0 == 387)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((pp)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_387
			else if (__choose0 == 388)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((s)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_388
			else if (__choose0 == 389)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((s)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_389
			else if (__choose0 == 390)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((str)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_390
			else if (__choose0 == 391)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((str)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_391
			else if (__choose0 == 392)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((ue)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_392
			else if (__choose0 == 393)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup(((ue)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_393
			else if (__choose0 == 394)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p && !(1 << 5)), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_394
			else if (__choose0 == 395)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p && !(1 << 5)), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_395
			else if (__choose0 == 396)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), (((e) - p)));
			}
			#endif
			#ifdef __COMPILE_396
			else if (__choose0 == 397)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), (((p) - p)));
			}
			#endif
			#ifdef __COMPILE_397
			else if (__choose0 == 398)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), (((pp) - p)));
			}
			#endif
			#ifdef __COMPILE_398
			else if (__choose0 == 399)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), (((s) - p)));
			}
			#endif
			#ifdef __COMPILE_399
			else if (__choose0 == 400)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), (((str) - p)));
			}
			#endif
			#ifdef __COMPILE_400
			else if (__choose0 == 401)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), (((ue) - p)));
			}
			#endif
			#ifdef __COMPILE_401
			else if (__choose0 == 402)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp && !(1 << 5) - p)));
			}
			#endif
			#ifdef __COMPILE_402
			else if (__choose0 == 403)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - (e))));
			}
			#endif
			#ifdef __COMPILE_403
			else if (__choose0 == 404)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - (p))));
			}
			#endif
			#ifdef __COMPILE_404
			else if (__choose0 == 405)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - (pp))));
			}
			#endif
			#ifdef __COMPILE_405
			else if (__choose0 == 406)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - (s))));
			}
			#endif
			#ifdef __COMPILE_406
			else if (__choose0 == 407)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - (str))));
			}
			#endif
			#ifdef __COMPILE_407
			else if (__choose0 == 408)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - (ue))));
			}
			#endif
			#ifdef __COMPILE_408
			else if (__choose0 == 409)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((pp - p && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_409
			else if (__choose0 == 410)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue && !(1 << 5) - p)));
			}
			#endif
			#ifdef __COMPILE_410
			else if (__choose0 == 411)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - (e))));
			}
			#endif
			#ifdef __COMPILE_411
			else if (__choose0 == 412)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - (p))));
			}
			#endif
			#ifdef __COMPILE_412
			else if (__choose0 == 413)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - (pp))));
			}
			#endif
			#ifdef __COMPILE_413
			else if (__choose0 == 414)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - (s))));
			}
			#endif
			#ifdef __COMPILE_414
			else if (__choose0 == 415)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - (str))));
			}
			#endif
			#ifdef __COMPILE_415
			else if (__choose0 == 416)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - (ue))));
			}
			#endif
			#ifdef __COMPILE_416
			else if (__choose0 == 417)
			{
			//AddStmtAndReplaceAtomKind
			ret->query = _estrndup((p), ((ue - p && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_417
			else if (__choose0 == 418)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup(((e)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_418
			else if (__choose0 == 419)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup(((p)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_419
			else if (__choose0 == 420)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup(((pp)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_420
			else if (__choose0 == 421)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup(((s)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_421
			else if (__choose0 == 422)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup(((str)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_422
			else if (__choose0 == 423)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup(((ue)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_423
			else if (__choose0 == 424)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s && !(1 << 5)), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_424
			else if (__choose0 == 425)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), (((e) - s)));
			}
			#endif
			#ifdef __COMPILE_425
			else if (__choose0 == 426)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), (((p) - s)));
			}
			#endif
			#ifdef __COMPILE_426
			else if (__choose0 == 427)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), (((pp) - s)));
			}
			#endif
			#ifdef __COMPILE_427
			else if (__choose0 == 428)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), (((s) - s)));
			}
			#endif
			#ifdef __COMPILE_428
			else if (__choose0 == 429)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), (((str) - s)));
			}
			#endif
			#ifdef __COMPILE_429
			else if (__choose0 == 430)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), (((ue) - s)));
			}
			#endif
			#ifdef __COMPILE_430
			else if (__choose0 == 431)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e && !(1 << 5) - s)));
			}
			#endif
			#ifdef __COMPILE_431
			else if (__choose0 == 432)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - (e))));
			}
			#endif
			#ifdef __COMPILE_432
			else if (__choose0 == 433)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - (p))));
			}
			#endif
			#ifdef __COMPILE_433
			else if (__choose0 == 434)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - (pp))));
			}
			#endif
			#ifdef __COMPILE_434
			else if (__choose0 == 435)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - (s))));
			}
			#endif
			#ifdef __COMPILE_435
			else if (__choose0 == 436)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - (str))));
			}
			#endif
			#ifdef __COMPILE_436
			else if (__choose0 == 437)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - (ue))));
			}
			#endif
			#ifdef __COMPILE_437
			else if (__choose0 == 438)
			{
			//AddStmtAndReplaceAtomKind
			ret->scheme = _estrndup((s), ((e - s && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_438
			else if (__choose0 == 439)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((e)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_439
			else if (__choose0 == 440)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((e)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_440
			else if (__choose0 == 441)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((p)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_441
			else if (__choose0 == 442)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((p)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_442
			else if (__choose0 == 443)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((pp)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_443
			else if (__choose0 == 444)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((pp)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_444
			else if (__choose0 == 445)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((s)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_445
			else if (__choose0 == 446)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((s)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_446
			else if (__choose0 == 447)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((str)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_447
			else if (__choose0 == 448)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((str)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_448
			else if (__choose0 == 449)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((ue)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_449
			else if (__choose0 == 450)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup(((ue)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_450
			else if (__choose0 == 451)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s && !(1 << 5)), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_451
			else if (__choose0 == 452)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s && !(1 << 5)), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_452
			else if (__choose0 == 453)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), (((e) - s)));
			}
			#endif
			#ifdef __COMPILE_453
			else if (__choose0 == 454)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), (((p) - s)));
			}
			#endif
			#ifdef __COMPILE_454
			else if (__choose0 == 455)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), (((pp) - s)));
			}
			#endif
			#ifdef __COMPILE_455
			else if (__choose0 == 456)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), (((s) - s)));
			}
			#endif
			#ifdef __COMPILE_456
			else if (__choose0 == 457)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), (((str) - s)));
			}
			#endif
			#ifdef __COMPILE_457
			else if (__choose0 == 458)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), (((ue) - s)));
			}
			#endif
			#ifdef __COMPILE_458
			else if (__choose0 == 459)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p && !(1 << 5) - s)));
			}
			#endif
			#ifdef __COMPILE_459
			else if (__choose0 == 460)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - (e))));
			}
			#endif
			#ifdef __COMPILE_460
			else if (__choose0 == 461)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - (p))));
			}
			#endif
			#ifdef __COMPILE_461
			else if (__choose0 == 462)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - (pp))));
			}
			#endif
			#ifdef __COMPILE_462
			else if (__choose0 == 463)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - (s))));
			}
			#endif
			#ifdef __COMPILE_463
			else if (__choose0 == 464)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - (str))));
			}
			#endif
			#ifdef __COMPILE_464
			else if (__choose0 == 465)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - (ue))));
			}
			#endif
			#ifdef __COMPILE_465
			else if (__choose0 == 466)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((p - s && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_466
			else if (__choose0 == 467)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp && !(1 << 5) - s)));
			}
			#endif
			#ifdef __COMPILE_467
			else if (__choose0 == 468)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - (e))));
			}
			#endif
			#ifdef __COMPILE_468
			else if (__choose0 == 469)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - (p))));
			}
			#endif
			#ifdef __COMPILE_469
			else if (__choose0 == 470)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - (pp))));
			}
			#endif
			#ifdef __COMPILE_470
			else if (__choose0 == 471)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - (s))));
			}
			#endif
			#ifdef __COMPILE_471
			else if (__choose0 == 472)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - (str))));
			}
			#endif
			#ifdef __COMPILE_472
			else if (__choose0 == 473)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - (ue))));
			}
			#endif
			#ifdef __COMPILE_473
			else if (__choose0 == 474)
			{
			//AddStmtAndReplaceAtomKind
			ret->user = _estrndup((s), ((pp - s && !(1 << 5))));
			}
			#endif
			#ifdef __COMPILE_474
			else if (__choose0 == 475)
			{
			//AddStmtAndReplaceAtomKind
			s = (1);
			}
			#endif
			#ifdef __COMPILE_475
			else if (__choose0 == 476)
			{
			//AddStmtAndReplaceAtomKind
			s = (3);
			}
			#endif
			#ifdef __COMPILE_476
			else if (__choose0 == 477)
			{
			//AddStmtAndReplaceAtomKind
			s = (4);
			}
			#endif
			#ifdef __COMPILE_477
			else if (__choose0 == 478)
			{
			//AddStmtAndReplaceAtomKind
			s = (e) + 1;
			}
			#endif
			#ifdef __COMPILE_478
			else if (__choose0 == 479)
			{
			//AddStmtAndReplaceAtomKind
			s = (e) + 3;
			}
			#endif
			#ifdef __COMPILE_479
			else if (__choose0 == 480)
			{
			//AddStmtAndReplaceAtomKind
			s = (e) + 4;
			}
			#endif
			#ifdef __COMPILE_480
			else if (__choose0 == 481)
			{
			//AddStmtAndReplaceAtomKind
			s = (e);
			}
			#endif
			#ifdef __COMPILE_481
			else if (__choose0 == 482)
			{
			//AddStmtAndReplaceAtomKind
			s = (p) + 1;
			}
			#endif
			#ifdef __COMPILE_482
			else if (__choose0 == 483)
			{
			//AddStmtAndReplaceAtomKind
			s = (p) + 3;
			}
			#endif
			#ifdef __COMPILE_483
			else if (__choose0 == 484)
			{
			//AddStmtAndReplaceAtomKind
			s = (p) + 4;
			}
			#endif
			#ifdef __COMPILE_484
			else if (__choose0 == 485)
			{
			//AddStmtAndReplaceAtomKind
			s = (p);
			}
			#endif
			#ifdef __COMPILE_485
			else if (__choose0 == 486)
			{
			//AddStmtAndReplaceAtomKind
			s = (pp) + 1;
			}
			#endif
			#ifdef __COMPILE_486
			else if (__choose0 == 487)
			{
			//AddStmtAndReplaceAtomKind
			s = (pp) + 3;
			}
			#endif
			#ifdef __COMPILE_487
			else if (__choose0 == 488)
			{
			//AddStmtAndReplaceAtomKind
			s = (pp) + 4;
			}
			#endif
			#ifdef __COMPILE_488
			else if (__choose0 == 489)
			{
			//AddStmtAndReplaceAtomKind
			s = (pp);
			}
			#endif
			#ifdef __COMPILE_489
			else if (__choose0 == 490)
			{
			//AddStmtAndReplaceAtomKind
			s = (s) + 1;
			}
			#endif
			#ifdef __COMPILE_490
			else if (__choose0 == 491)
			{
			//AddStmtAndReplaceAtomKind
			s = (s) + 3;
			}
			#endif
			#ifdef __COMPILE_491
			else if (__choose0 == 492)
			{
			//AddStmtAndReplaceAtomKind
			s = (s) + 4;
			}
			#endif
			#ifdef __COMPILE_492
			else if (__choose0 == 493)
			{
			//AddStmtAndReplaceAtomKind
			s = (s);
			}
			#endif
			#ifdef __COMPILE_493
			else if (__choose0 == 494)
			{
			//AddStmtAndReplaceAtomKind
			s = (str) + 1;
			}
			#endif
			#ifdef __COMPILE_494
			else if (__choose0 == 495)
			{
			//AddStmtAndReplaceAtomKind
			s = (str) + 3;
			}
			#endif
			#ifdef __COMPILE_495
			else if (__choose0 == 496)
			{
			//AddStmtAndReplaceAtomKind
			s = (str) + 4;
			}
			#endif
			#ifdef __COMPILE_496
			else if (__choose0 == 497)
			{
			//AddStmtAndReplaceAtomKind
			s = (str);
			}
			#endif
			#ifdef __COMPILE_497
			else if (__choose0 == 498)
			{
			//AddStmtAndReplaceAtomKind
			s = (ue) + 1;
			}
			#endif
			#ifdef __COMPILE_498
			else if (__choose0 == 499)
			{
			//AddStmtAndReplaceAtomKind
			s = (ue) + 3;
			}
			#endif
			#ifdef __COMPILE_499
			else if (__choose0 == 500)
			{
			//AddStmtAndReplaceAtomKind
			s = (ue) + 4;
			}
			#endif
			#ifdef __COMPILE_500
			else if (__choose0 == 501)
			{
			//AddStmtAndReplaceAtomKind
			s = (ue);
			}
			#endif
			#ifdef __COMPILE_501
			else if (__choose0 == 502)
			{
			//AddStmtAndReplaceAtomKind
			s = e && !(1 << 5) + 1;
			}
			#endif
			#ifdef __COMPILE_502
			else if (__choose0 == 503)
			{
			//AddStmtAndReplaceAtomKind
			s = e && !(1 << 5) + 3;
			}
			#endif
			#ifdef __COMPILE_503
			else if (__choose0 == 504)
			{
			//AddStmtAndReplaceAtomKind
			s = e && !(1 << 5) + 4;
			}
			#endif
			#ifdef __COMPILE_504
			else if (__choose0 == 505)
			{
			//AddStmtAndReplaceAtomKind
			s = e && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_505
			else if (__choose0 == 506)
			{
			//AddStmtAndReplaceAtomKind
			s = p && !(1 << 5) + 1;
			}
			#endif
			#ifdef __COMPILE_506
			else if (__choose0 == 507)
			{
			//AddStmtAndReplaceAtomKind
			s = str && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_507
			else if (__choose0 == 508)
			{
			//AddStmtAndReplaceAtomKind
			ue = (e) + length;
			}
			#endif
			#ifdef __COMPILE_508
			else if (__choose0 == 509)
			{
			//AddStmtAndReplaceAtomKind
			ue = (e);
			}
			#endif
			#ifdef __COMPILE_509
			else if (__choose0 == 510)
			{
			//AddStmtAndReplaceAtomKind
			ue = (length);
			}
			#endif
			#ifdef __COMPILE_510
			else if (__choose0 == 511)
			{
			//AddStmtAndReplaceAtomKind
			ue = (p) + length;
			}
			#endif
			#ifdef __COMPILE_511
			else if (__choose0 == 512)
			{
			//AddStmtAndReplaceAtomKind
			ue = (p);
			}
			#endif
			#ifdef __COMPILE_512
			else if (__choose0 == 513)
			{
			//AddStmtAndReplaceAtomKind
			ue = (pp) + length;
			}
			#endif
			#ifdef __COMPILE_513
			else if (__choose0 == 514)
			{
			//AddStmtAndReplaceAtomKind
			ue = (pp);
			}
			#endif
			#ifdef __COMPILE_514
			else if (__choose0 == 515)
			{
			//AddStmtAndReplaceAtomKind
			ue = (s) + length;
			}
			#endif
			#ifdef __COMPILE_515
			else if (__choose0 == 516)
			{
			//AddStmtAndReplaceAtomKind
			ue = (s);
			}
			#endif
			#ifdef __COMPILE_516
			else if (__choose0 == 517)
			{
			//AddStmtAndReplaceAtomKind
			ue = (str) + length;
			}
			#endif
			#ifdef __COMPILE_517
			else if (__choose0 == 518)
			{
			//AddStmtAndReplaceAtomKind
			ue = (str);
			}
			#endif
			#ifdef __COMPILE_518
			else if (__choose0 == 519)
			{
			//AddStmtAndReplaceAtomKind
			ue = (ue) + length;
			}
			#endif
			#ifdef __COMPILE_519
			else if (__choose0 == 520)
			{
			//AddStmtAndReplaceAtomKind
			ue = (ue);
			}
			#endif
			#ifdef __COMPILE_520
			else if (__choose0 == 521)
			{
			//AddStmtAndReplaceAtomKind
			ue = s && !(1 << 5) + length;
			}
			#endif
			#ifdef __COMPILE_521
			else if (__choose0 == 522)
			{
			//AddStmtAndReplaceAtomKind
			ue = s + length && !(1 << 5);
			}
			#endif
			#ifdef __COMPILE_522
			else if (__choose0 == 523)
			{
			//AddStmtKind
			(executor_globals.argument_stack) = zend_vm_stack_new_page(((64 * 1024) - 64));
			}
			#endif
			#ifdef __COMPILE_523
			else if (__choose0 == 524)
			{
			//AddStmtKind
			_efree((ret));
			}
			#endif
			#ifdef __COMPILE_524
			else if (__choose0 == 525)
			{
			//AddStmtKind
			_efree((ret->pass));
			}
			#endif
			#ifdef __COMPILE_525
			else if (__choose0 == 526)
			{
			//AddStmtKind
			_efree((ret->scheme));
			}
			#endif
			#ifdef __COMPILE_526
			else if (__choose0 == 527)
			{
			//AddStmtKind
			_efree((ret->user));
			}
			#endif
			#ifdef __COMPILE_527
			else if (__choose0 == 528)
			{
			//AddStmtKind
			e = p;
			}
			#endif
			#ifdef __COMPILE_528
			else if (__choose0 == 529)
			{
			//AddStmtKind
			e = ue;
			}
			#endif
			#ifdef __COMPILE_529
			else if (__choose0 == 530)
			{
			//AddStmtKind
			exit(1);
			}
			#endif
			#ifdef __COMPILE_530
			else if (__choose0 == 531)
			{
			//AddStmtKind
			memcpy(port_buf, p, (e - p));
			}
			#endif
			#ifdef __COMPILE_531
			else if (__choose0 == 532)
			{
			//AddStmtKind
			memcpy(port_buf, p, (pp - p));
			}
			#endif
			#ifdef __COMPILE_532
			else if (__choose0 == 533)
			{
			//AddStmtKind
			p = e + 1;
			}
			#endif
			#ifdef __COMPILE_533
			else if (__choose0 == 534)
			{
			//AddStmtKind
			p = e;
			}
			#endif
			#ifdef __COMPILE_534
			else if (__choose0 == 535)
			{
			//AddStmtKind
			p = pp;
			}
			#endif
			#ifdef __COMPILE_535
			else if (__choose0 == 536)
			{
			//AddStmtKind
			p = s;
			}
			#endif
			#ifdef __COMPILE_536
			else if (__choose0 == 537)
			{
			//AddStmtKind
			p++;
			}
			#endif
			#ifdef __COMPILE_537
			else if (__choose0 == 538)
			{
			//AddStmtKind
			p--;
			}
			#endif
			#ifdef __COMPILE_538
			else if (__choose0 == 539)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->fragment, (ue - p));
			}
			#endif
			#ifdef __COMPILE_539
			else if (__choose0 == 540)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->host, (p - s));
			}
			#endif
			#ifdef __COMPILE_540
			else if (__choose0 == 541)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->pass, (p - pp));
			}
			#endif
			#ifdef __COMPILE_541
			else if (__choose0 == 542)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->path, (p - s));
			}
			#endif
			#ifdef __COMPILE_542
			else if (__choose0 == 543)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->path, (ue - s));
			}
			#endif
			#ifdef __COMPILE_543
			else if (__choose0 == 544)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->query, (pp - p));
			}
			#endif
			#ifdef __COMPILE_544
			else if (__choose0 == 545)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->query, (ue - p));
			}
			#endif
			#ifdef __COMPILE_545
			else if (__choose0 == 546)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->scheme, (e - s));
			}
			#endif
			#ifdef __COMPILE_546
			else if (__choose0 == 547)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->user, (p - s));
			}
			#endif
			#ifdef __COMPILE_547
			else if (__choose0 == 548)
			{
			//AddStmtKind
			php_replace_controlchars_ex(ret->user, (pp - s));
			}
			#endif
			#ifdef __COMPILE_548
			else if (__choose0 == 549)
			{
			//AddStmtKind
			pp = p;
			}
			#endif
			#ifdef __COMPILE_549
			else if (__choose0 == 550)
			{
			//AddStmtKind
			pp = strchr(s, '#');
			}
			#endif
			#ifdef __COMPILE_550
			else if (__choose0 == 551)
			{
			//AddStmtKind
			pp++;
			}
			#endif
			#ifdef __COMPILE_551
			else if (__choose0 == 552)
			{
			//AddStmtKind
			ret->fragment = _estrndup((p), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_552
			else if (__choose0 == 553)
			{
			//AddStmtKind
			ret->host = _estrndup((s), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_553
			else if (__choose0 == 554)
			{
			//AddStmtKind
			ret->pass = _estrndup((pp), ((p - pp)));
			}
			#endif
			#ifdef __COMPILE_554
			else if (__choose0 == 555)
			{
			//AddStmtKind
			ret->path = _estrndup((s), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_555
			else if (__choose0 == 556)
			{
			//AddStmtKind
			ret->path = _estrndup((s), ((ue - s)));
			}
			#endif
			#ifdef __COMPILE_556
			else if (__choose0 == 557)
			{
			//AddStmtKind
			ret->query = _estrndup((p), ((pp - p)));
			}
			#endif
			#ifdef __COMPILE_557
			else if (__choose0 == 558)
			{
			//AddStmtKind
			ret->query = _estrndup((p), ((ue - p)));
			}
			#endif
			#ifdef __COMPILE_558
			else if (__choose0 == 559)
			{
			//AddStmtKind
			ret->scheme = _estrndup((s), ((e - s)));
			}
			#endif
			#ifdef __COMPILE_559
			else if (__choose0 == 560)
			{
			//AddStmtKind
			ret->user = _estrndup((s), ((p - s)));
			}
			#endif
			#ifdef __COMPILE_560
			else if (__choose0 == 561)
			{
			//AddStmtKind
			ret->user = _estrndup((s), ((pp - s)));
			}
			#endif
			#ifdef __COMPILE_561
			else if (__choose0 == 562)
			{
			//AddStmtKind
			s = e + 1;
			}
			#endif
			#ifdef __COMPILE_562
			else if (__choose0 == 563)
			{
			//AddStmtKind
			s = e + 3;
			}
			#endif
			#ifdef __COMPILE_563
			else if (__choose0 == 564)
			{
			//AddStmtKind
			s = e + 4;
			}
			#endif
			#ifdef __COMPILE_564
			else if (__choose0 == 565)
			{
			//AddStmtKind
			s = e;
			}
			#endif
			#ifdef __COMPILE_565
			else if (__choose0 == 566)
			{
			//AddStmtKind
			s = p + 1;
			}
			#endif
			#ifdef __COMPILE_566
			else if (__choose0 == 567)
			{
			//AddStmtKind
			s = str;
			}
			#endif
			#ifdef __COMPILE_567
			else if (__choose0 == 568)
			{
			//AddStmtKind
			ue = s + length;
			}
			#endif
			#ifdef __COMPILE_568
			else if (__choose0 == 569)
			{
			//AddStmtKind
			zend_error((1 << 3L), "A non well formed numeric value encountered");
			}
			#endif
			#ifdef __COMPILE_569
			else if (__choose0 == 570)
			{
			//IfExitKind
			if (__is_neg("0-570", "L321", 8, &(p), sizeof (p), &(pp),
						 sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue),
						 sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str),
						 sizeof (str)))
			    goto end;
			}
			#endif
			#ifdef __COMPILE_570
			else if (__choose0 == 571)
			{
			//IfExitKind
			if (__is_neg("0-571", "L321", 8, &(p), sizeof (p), &(pp),
						 sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue),
						 sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str),
						 sizeof (str)))
			    goto just_path;
			}
			#endif
			#ifdef __COMPILE_571
			else if (__choose0 == 572)
			{
			//IfExitKind
			if (__is_neg("0-572", "L321", 8, &(p), sizeof (p), &(pp),
						 sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue),
						 sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str),
						 sizeof (str)))
			    goto label_parse;
			}
			#endif
			#ifdef __COMPILE_572
			else if (__choose0 == 573)
			{
			//IfExitKind
			if (__is_neg("0-573", "L321", 8, &(p), sizeof (p), &(pp),
						 sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue),
						 sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str),
						 sizeof (str)))
			    goto nohost;
			}
			#endif
			#ifdef __COMPILE_573
			else if (__choose0 == 574)
			{
			//IfExitKind
			if (__is_neg("0-574", "L321", 8, &(p), sizeof (p), &(pp),
						 sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue),
						 sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str),
						 sizeof (str)))
			    goto parse_port;
			}
			#endif
			#ifdef __COMPILE_574
			else if (__choose0 == 575)
			{
			//IfExitKind
			if (__is_neg("0-575", "L321", 8, &(p), sizeof (p), &(pp),
						 sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue),
						 sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str),
						 sizeof (str)))
			    return 0;
			}
			#endif
			int __choose1 = __choose("__SWITCH1");
			if (__choose1 == 0)
			{
			goto label_parse;
			
			}
			#ifdef __COMPILE_575
			else if (__choose1 == 1)
			{
			//GuardKind
			if (!__is_neg("1-1", "L321", 8, &(p), sizeof (p), &(pp), sizeof (pp), &(s), sizeof (s), &(ret), sizeof (ret), &(ue), sizeof (ue), &(e), sizeof (e), &(length), sizeof (length), &(str), sizeof (str)))
			    goto label_parse;
			
			}
			#endif
			}
		}
	
		if (p - s) {
			ret->path = estrndup(s, (p-s));
			php_replace_controlchars_ex(ret->path, (p - s));
		}	
	
		if (pp) {
			if (pp - ++p) { 
				ret->query = estrndup(p, (pp-p));
				php_replace_controlchars_ex(ret->query, (pp - p));
			}
			p = pp;
			goto label_parse;
		} else if (++p - ue) {
			ret->query = estrndup(p, (ue-p));
			php_replace_controlchars_ex(ret->query, (ue - p));
		}
	} else if ((p = memchr(s, '#', (ue - s)))) {
		if (p - s) {
			ret->path = estrndup(s, (p-s));
			php_replace_controlchars_ex(ret->path, (p - s));
		}	
		
		label_parse:
		p++;
		
		if (ue - p) {
			ret->fragment = estrndup(p, (ue-p));
			php_replace_controlchars_ex(ret->fragment, (ue - p));
		}	
	} else {
		ret->path = estrndup(s, (ue-s));
		php_replace_controlchars_ex(ret->path, (ue - s));
	}
end:
	return ret;
}
/* }}} */

/* {{{ proto mixed parse_url(string url, [int url_component])
   Parse a URL and return its components */
PHP_FUNCTION(parse_url)
{
	char *str;
	int str_len;
	php_url *resource;
	long key = -1;

	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s|l", &str, &str_len, &key) == FAILURE) {
		return;
	}

	resource = php_url_parse_ex(str, str_len);
	if (resource == NULL) {
		/* @todo Find a method to determine why php_url_parse_ex() failed */
		RETURN_FALSE;
	}

	if (key > -1) {
		switch (key) {
			case PHP_URL_SCHEME:
				if (resource->scheme != NULL) RETVAL_STRING(resource->scheme, 1);
				break;
			case PHP_URL_HOST:
				if (resource->host != NULL) RETVAL_STRING(resource->host, 1);
				break;
			case PHP_URL_PORT:
				if (resource->port != 0) RETVAL_LONG(resource->port);
				break;
			case PHP_URL_USER:
				if (resource->user != NULL) RETVAL_STRING(resource->user, 1);
				break;
			case PHP_URL_PASS:
				if (resource->pass != NULL) RETVAL_STRING(resource->pass, 1);
				break;
			case PHP_URL_PATH:
				if (resource->path != NULL) RETVAL_STRING(resource->path, 1);
				break;
			case PHP_URL_QUERY:
				if (resource->query != NULL) RETVAL_STRING(resource->query, 1);
				break;
			case PHP_URL_FRAGMENT:
				if (resource->fragment != NULL) RETVAL_STRING(resource->fragment, 1);
				break;
			default:
				php_error_docref(NULL TSRMLS_CC, E_WARNING, "Invalid URL component identifier %ld", key);
				RETVAL_FALSE;
		}
		goto done;
	}

	/* allocate an array for return */
	array_init(return_value);

    /* add the various elements to the array */
	if (resource->scheme != NULL)
		add_assoc_string(return_value, "scheme", resource->scheme, 1);
	if (resource->host != NULL)
		add_assoc_string(return_value, "host", resource->host, 1);
	if (resource->port != 0)
		add_assoc_long(return_value, "port", resource->port);
	if (resource->user != NULL)
		add_assoc_string(return_value, "user", resource->user, 1);
	if (resource->pass != NULL)
		add_assoc_string(return_value, "pass", resource->pass, 1);
	if (resource->path != NULL)
		add_assoc_string(return_value, "path", resource->path, 1);
	if (resource->query != NULL)
		add_assoc_string(return_value, "query", resource->query, 1);
	if (resource->fragment != NULL)
		add_assoc_string(return_value, "fragment", resource->fragment, 1);
done:	
	php_url_free(resource);
}
/* }}} */

/* {{{ php_htoi
 */
static int php_htoi(char *s)
{
	int value;
	int c;

	c = ((unsigned char *)s)[0];
	if (isupper(c))
		c = tolower(c);
	value = (c >= '0' && c <= '9' ? c - '0' : c - 'a' + 10) * 16;

	c = ((unsigned char *)s)[1];
	if (isupper(c))
		c = tolower(c);
	value += c >= '0' && c <= '9' ? c - '0' : c - 'a' + 10;

	return (value);
}
/* }}} */

/* rfc1738:

   ...The characters ";",
   "/", "?", ":", "@", "=" and "&" are the characters which may be
   reserved for special meaning within a scheme...

   ...Thus, only alphanumerics, the special characters "$-_.+!*'(),", and
   reserved characters used for their reserved purposes may be used
   unencoded within a URL...

   For added safety, we only leave -_. unencoded.
 */

static unsigned char hexchars[] = "0123456789ABCDEF";

/* {{{ php_url_encode
 */
PHPAPI char *php_url_encode(char const *s, int len, int *new_length)
{
	register unsigned char c;
	unsigned char *to, *start;
	unsigned char const *from, *end;
	
	from = (unsigned char *)s;
	end = (unsigned char *)s + len;
	start = to = (unsigned char *) safe_emalloc(3, len, 1);

	while (from < end) {
		c = *from++;

		if (c == ' ') {
			*to++ = '+';
#ifndef CHARSET_EBCDIC
		} else if ((c < '0' && c != '-' && c != '.') ||
				   (c < 'A' && c > '9') ||
				   (c > 'Z' && c < 'a' && c != '_') ||
				   (c > 'z')) {
			to[0] = '%';
			to[1] = hexchars[c >> 4];
			to[2] = hexchars[c & 15];
			to += 3;
#else /*CHARSET_EBCDIC*/
		} else if (!isalnum(c) && strchr("_-.", c) == NULL) {
			/* Allow only alphanumeric chars and '_', '-', '.'; escape the rest */
			to[0] = '%';
			to[1] = hexchars[os_toascii[c] >> 4];
			to[2] = hexchars[os_toascii[c] & 15];
			to += 3;
#endif /*CHARSET_EBCDIC*/
		} else {
			*to++ = c;
		}
	}
	*to = 0;
	if (new_length) {
		*new_length = to - start;
	}
	return (char *) start;
}
/* }}} */

/* {{{ proto string urlencode(string str)
   URL-encodes string */
PHP_FUNCTION(urlencode)
{
	char *in_str, *out_str;
	int in_str_len, out_str_len;

	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &in_str,
							  &in_str_len) == FAILURE) {
		return;
	}

	out_str = php_url_encode(in_str, in_str_len, &out_str_len);
	RETURN_STRINGL(out_str, out_str_len, 0);
}
/* }}} */

/* {{{ proto string urldecode(string str)
   Decodes URL-encoded string */
PHP_FUNCTION(urldecode)
{
	char *in_str, *out_str;
	int in_str_len, out_str_len;

	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &in_str,
							  &in_str_len) == FAILURE) {
		return;
	}

	out_str = estrndup(in_str, in_str_len);
	out_str_len = php_url_decode(out_str, in_str_len);

    RETURN_STRINGL(out_str, out_str_len, 0);
}
/* }}} */

/* {{{ php_url_decode
 */
PHPAPI int php_url_decode(char *str, int len)
{
	char *dest = str;
	char *data = str;

	while (len--) {
		if (*data == '+') {
			*dest = ' ';
		}
		else if (*data == '%' && len >= 2 && isxdigit((int) *(data + 1)) 
				 && isxdigit((int) *(data + 2))) {
#ifndef CHARSET_EBCDIC
			*dest = (char) php_htoi(data + 1);
#else
			*dest = os_toebcdic[(char) php_htoi(data + 1)];
#endif
			data += 2;
			len -= 2;
		} else {
			*dest = *data;
		}
		data++;
		dest++;
	}
	*dest = '\0';
	return dest - str;
}
/* }}} */

/* {{{ php_raw_url_encode
 */
PHPAPI char *php_raw_url_encode(char const *s, int len, int *new_length)
{
	register int x, y;
	unsigned char *str;

	str = (unsigned char *) safe_emalloc(3, len, 1);
	for (x = 0, y = 0; len--; x++, y++) {
		str[y] = (unsigned char) s[x];
#ifndef CHARSET_EBCDIC
		if ((str[y] < '0' && str[y] != '-' && str[y] != '.') ||
			(str[y] < 'A' && str[y] > '9') ||
			(str[y] > 'Z' && str[y] < 'a' && str[y] != '_') ||
			(str[y] > 'z' && str[y] != '~')) {
			str[y++] = '%';
			str[y++] = hexchars[(unsigned char) s[x] >> 4];
			str[y] = hexchars[(unsigned char) s[x] & 15];
#else /*CHARSET_EBCDIC*/
		if (!isalnum(str[y]) && strchr("_-.~", str[y]) != NULL) {
			str[y++] = '%';
			str[y++] = hexchars[os_toascii[(unsigned char) s[x]] >> 4];
			str[y] = hexchars[os_toascii[(unsigned char) s[x]] & 15];
#endif /*CHARSET_EBCDIC*/
		}
	}
	str[y] = '\0';
	if (new_length) {
		*new_length = y;
	}
	return ((char *) str);
}
/* }}} */

/* {{{ proto string rawurlencode(string str)
   URL-encodes string */
PHP_FUNCTION(rawurlencode)
{
	char *in_str, *out_str;
	int in_str_len, out_str_len;

	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &in_str,
							  &in_str_len) == FAILURE) {
		return;
	}

	out_str = php_raw_url_encode(in_str, in_str_len, &out_str_len);
	RETURN_STRINGL(out_str, out_str_len, 0);
}
/* }}} */

/* {{{ proto string rawurldecode(string str)
   Decodes URL-encodes string */
PHP_FUNCTION(rawurldecode)
{
	char *in_str, *out_str;
	int in_str_len, out_str_len;

	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &in_str,
							  &in_str_len) == FAILURE) {
		return;
	}

	out_str = estrndup(in_str, in_str_len);
	out_str_len = php_raw_url_decode(out_str, in_str_len);

    RETURN_STRINGL(out_str, out_str_len, 0);
}
/* }}} */

/* {{{ php_raw_url_decode
 */
PHPAPI int php_raw_url_decode(char *str, int len)
{
	char *dest = str;
	char *data = str;

	while (len--) {
		if (*data == '%' && len >= 2 && isxdigit((int) *(data + 1)) 
			&& isxdigit((int) *(data + 2))) {
#ifndef CHARSET_EBCDIC
			*dest = (char) php_htoi(data + 1);
#else
			*dest = os_toebcdic[(char) php_htoi(data + 1)];
#endif
			data += 2;
			len -= 2;
		} else {
			*dest = *data;
		}
		data++;
		dest++;
	}
	*dest = '\0';
	return dest - str;
}
/* }}} */

/* {{{ proto array get_headers(string url[, int format])
   fetches all the headers sent by the server in response to a HTTP request */
PHP_FUNCTION(get_headers)
{
	char *url;
	int url_len;
	php_stream_context *context;
	php_stream *stream;
	zval **prev_val, **hdr = NULL, **h;
	HashPosition pos;
	HashTable *hashT;
	long format = 0;
                
	if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s|l", &url, &url_len, &format) == FAILURE) {
		return;
	}
	context = FG(default_context) ? FG(default_context) : (FG(default_context) = php_stream_context_alloc());

	if (!(stream = php_stream_open_wrapper_ex(url, "r", REPORT_ERRORS | STREAM_USE_URL | STREAM_ONLY_GET_HEADERS, NULL, context))) {
		RETURN_FALSE;
	}

	if (!stream->wrapperdata || Z_TYPE_P(stream->wrapperdata) != IS_ARRAY) {
		php_stream_close(stream);
		RETURN_FALSE;
	}

	array_init(return_value);

	/* check for curl-wrappers that provide headers via a special "headers" element */
	if (zend_hash_find(HASH_OF(stream->wrapperdata), "headers", sizeof("headers"), (void **)&h) != FAILURE && Z_TYPE_PP(h) == IS_ARRAY) {
		/* curl-wrappers don't load data until the 1st read */ 
		if (!Z_ARRVAL_PP(h)->nNumOfElements) {
			php_stream_getc(stream);
		}
		zend_hash_find(HASH_OF(stream->wrapperdata), "headers", sizeof("headers"), (void **)&h);
		hashT = Z_ARRVAL_PP(h);	
	} else {
		hashT = HASH_OF(stream->wrapperdata);
	}

	zend_hash_internal_pointer_reset_ex(hashT, &pos);
	while (zend_hash_get_current_data_ex(hashT, (void**)&hdr, &pos) != FAILURE) {
		if (!hdr || Z_TYPE_PP(hdr) != IS_STRING) {
			zend_hash_move_forward_ex(hashT, &pos);
			continue;
		}
		if (!format) {
no_name_header:
			add_next_index_stringl(return_value, Z_STRVAL_PP(hdr), Z_STRLEN_PP(hdr), 1);
		} else {
			char c;
			char *s, *p;

			if ((p = strchr(Z_STRVAL_PP(hdr), ':'))) {
				c = *p;
				*p = '\0';
				s = p + 1;
				while (isspace((int)*(unsigned char *)s)) {
					s++;
				}

				if (zend_hash_find(HASH_OF(return_value), Z_STRVAL_PP(hdr), (p - Z_STRVAL_PP(hdr) + 1), (void **) &prev_val) == FAILURE) {
					add_assoc_stringl_ex(return_value, Z_STRVAL_PP(hdr), (p - Z_STRVAL_PP(hdr) + 1), s, (Z_STRLEN_PP(hdr) - (s - Z_STRVAL_PP(hdr))), 1);
				} else { /* some headers may occur more then once, therefor we need to remake the string into an array */
					convert_to_array(*prev_val);
					add_next_index_stringl(*prev_val, s, (Z_STRLEN_PP(hdr) - (s - Z_STRVAL_PP(hdr))), 1);
				}

				*p = c;
			} else {
				goto no_name_header;
			}
		}
		zend_hash_move_forward_ex(hashT, &pos);
	}

	php_stream_close(stream);
}
/* }}} */

/*
 * Local variables:
 * tab-width: 4
 * c-basic-offset: 4
 * End:
 * vim600: sw=4 ts=4 fdm=marker
 * vim<600: sw=4 ts=4
 */
